(function(t){function e(e){for(var i,a,s=e[0],h=e[1],c=e[2],l=0,d=[];l<s.length;l++)a=s[l],o[a]&&d.push(o[a][0]),o[a]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var h=n[s];0!==o[h]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=h;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"233c":function(t,e,n){},4189:function(t,e,n){},6175:function(t,e,n){t.exports=n.p+"img/default.745351e1.jpg"},"7d57":function(t,e,n){},"9a32":function(t,e,n){},b20f:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d"),n("b20f");var i=n("2b0e"),o=(n("7f7f"),n("5176")),r=n.n(o),a=n("d225"),s=n("b0b4");n("9a32");function h(t){var e=[],n=window.innerWidth,i=window.innerHeight,o=.04*n,r=.06*i,a=.01*n,s=.01*n,h=function(t,e){var n=t.el,o=e.el,h=e.top+o.offsetHeight+a;h+n.offsetHeight>i?t.setPosition(r,e.right+o.offsetWidth+s):t.setPosition(h,e.right)};return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.delay,a=new c(n);e.length>0?h(a,e[e.length-1]):a.setPosition(r,o),e.push(a),a.show(),setTimeout(function(){if(a.hide(),e.splice(0,1),e.length>0&&(e[0].setPosition(r,o),e.length>1))for(var t=1,n=e.length;t<n;t++)h(e[t],e[t-1])},i)}}for(var c=function(){function t(e){var n=this;Object(a["a"])(this,t),this.show=function(){n._el.classList.add("show")},this.hide=function(){n._el.classList.remove("show"),n._el.classList.add("hide"),setTimeout(function(){document.body.removeChild(n._el)},300)},this._message=e,this.init()}return Object(s["a"])(t,[{key:"init",value:function(){var t=document.createElement("div");t.classList.add("toast"),t.innerHTML=this._message,document.body.appendChild(t),this._el=t}},{key:"setPosition",value:function(t,e){var n=this.el;this.top=t,this.right=e,r()(n.style,{top:t+"px",right:e+"px"})}},{key:"el",get:function(){return this._el}}]),t}(),u=h({delay:5e3}),l=function(t,e){var n=null;return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];n&&clearTimeout(n),n=setTimeout(function(){t.apply(void 0,o)},e)}},d=!!window.localStorage,f="DING_MENU_VISIBLE",p=function(){if(!d)return!0;var t=localStorage.getItem(f);try{return JSON.parse(t)}catch(e){return!0}},v=function(t){d&&localStorage.setItem(f,t)},m=(n("233c"),function(){return{width:window.innerWidth,height:window.innerHeight}}),g={name:"App",data:function(){return{menus:[{label:"动画时钟",name:"Clock"},{label:"颜色选择器",name:"ColorPicker"},{label:"图片裁剪器",name:"Cropper"},{label:"无限滚动列表",name:"InfiniteScroll"},{label:"贪食蛇",name:"Snake"}],menusVisible:p(),window:m(),contentOffsetTop:0}},computed:{isMobile:function(){return this.window.width<768},shouldMenuVisible:function(){return!this.isMobile||this.menusVisible}},render:function(){var t=arguments[0];return t("div",{attrs:{id:"app"},class:"app"},[t("header",{class:"app__header"},[t("h1",{class:"app__logo"},[t("a",{attrs:{href:"https://dingyuchao.me"}},["ding-js"])]),"\n          ",t("nav",{class:"app__nav",directives:[{name:"show",value:this.shouldMenuVisible}]},[this.menus.map(function(e){return t("router-link",{key:e.name,attrs:{to:{name:e.name},tag:"li"}},[t("a",[e.label])])}),"\n            ",t("li",[t("a",{attrs:{href:"https://github.com/ding-js/ife/tree/master/src/containers/".concat(this.$route.name),target:"_blank"}},["查看源码\n              "])])]),"\n          ",this.isMobile?t("div",[t("svg",{on:{click:this.expandToggle},attrs:{fill:"#666",height:"36",width:"36",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},class:{"app__nav-btn":!0,"app__nav-btn--expand":this.shouldMenuVisible}},[t("path",{attrs:{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}}),"\n                ",t("path",{attrs:{d:"M0-.75h24v24H0z",fill:"none"}})])]):null]),"\n        ",t("div",{class:"app__body"},[t("div",{class:"content",ref:"content",style:{minHeight:"".concat(this.window.height-this.contentOffsetTop-24,"px")}},[t("router-view",{attrs:{window:this.window}})])])])},mounted:function(){var t=this;this.$_handleResize=l(function(){t.window=m(),t.updateContentOffsetHeight()},100),this.updateContentOffsetHeight(),window.addEventListener("resize",this.$_handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.$_handleResize)},methods:{expandToggle:function(){this.menusVisible=!this.menusVisible},updateContentOffsetHeight:function(){var t=this.$refs.content;t&&(this.contentOffsetTop=t.offsetTop)}},watch:{menusVisible:function(t){var e=this;v(t),this.$nextTick(function(){e.updateContentOffsetHeight()})}}},_=n("cebc"),y=n("75fc"),b=(n("a481"),n("8c4f")),w={name:"NotFound",render:function(){var t=arguments[0];return t("p",["404 Not Found."])}},k=n("bfb3"),x=n.n(k),C=(n("c5f6"),n("55dd"),n("14b9"),n("768b")),M=(n("ac6a"),n("6b54"),n("6c7b"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&t.tagName){var i,o=["width","height"].map(function(i){return"number"===typeof e[i]?e[i]:+t.getAttribute(i)||n[i]||+t["offset"+i.charAt(0).toUpperCase()+i.slice(1)]||0}),r=Object(C["a"])(o,2),a=r[0],s=r[1];return"CANVAS"===t.tagName?i=t:(i=document.createElement("canvas"),t.appendChild(i)),i.setAttribute("width",a),i.setAttribute("height",s),{canvas:i,width:a,height:s}}console.warn("Invaid element")}),S=function(){function t(e,n){var i=this;Object(a["a"])(this,t),this._offset=0,this._alarms=[],this.draw=function(){var t=i.getCurrentTime(),e=i._ctx,n=i._options,o=n.width,r=n.height,a=n.color,s=n.radius,h={x:o/2,y:r/2},c=.08*s,u=s-c/2;e.clearRect(0,0,o,r),e.save(),e.strokeStyle=a,e.lineWidth=c,e.beginPath(),e.arc(h.x,h.y,u,0,2*Math.PI),e.stroke(),e.restore(),e.save();var l=c+.02*s,d=60;e.fillStyle=a,e.translate(s,s);for(var f=0;f<d;f++){var p=f%5===0?s/35:s/70,v=.1*s,m=-p/2,g=l-s;e.beginPath(),e.rect(m,g,p,v),e.fill(),e.rotate(2*Math.PI/d)}e.restore(),e.save();var _=s-.31*s,y=.18*s;e.fillStyle=a,e.font="".concat(y,"px sans-serif"),e.textAlign="center",e.textBaseline="middle";for(var b=1;b<=12;b++){var w=2*Math.PI*b/12,k=i.getCoordinate(_,w),x=k.x,C=k.y;e.fillText(b.toString(),x,C)}e.font="".concat(.6*y,"px sans-serif"),e.fillText("".concat(t.hour<12?"A.M":"P.M"),h.x,.3*r),e.restore(),e.save();var M=[{topY:-.72,bottomY:.24,degree:t.secondDegree,bottomWidth:.02,topWidth:.01},{topY:-.6,bottomY:.18,degree:t.minuteDegree,bottomWidth:.06,topWidth:.03},{topY:-.4,bottomY:.13,degree:t.hourDegree,bottomWidth:.045,topWidth:.02}],S=Math.tan(2*Math.PI*60/360),O=Math.tan(2*Math.PI*30/360);e.fillStyle=a,M.forEach(function(t){var n=s*t.bottomY,i=s*t.bottomWidth/2,o=i/S,r=s*t.topY,a=s*t.topWidth/2,h=a/O;e.translate(s,s),e.rotate(t.degree),e.beginPath(),e.moveTo(0,n),e.lineTo(-i,n-o),e.lineTo(-a,r+h),e.lineTo(0,r),e.lineTo(a,r+h),e.lineTo(i,n-o),e.lineTo(0,n),e.fill(),e.setTransform(1,0,0,1,0,0)}),e.restore(),e.save(),e.fillStyle="#ffffff",e.beginPath(),e.arc(h.x,h.y,.02*s,0,2*Math.PI),e.fill(),e.restore(),i.checkAlarms(t.date),i._requestId=window.requestAnimationFrame(i.draw)};var o={color:"#9b9b9b"},s=M(e,n,{width:300,height:300}),h=s.canvas;this._canvas=h,this._ctx=h.getContext("2d"),r()(o,n,{width:s.width,height:s.height});var c=Math.min(o.width,o.height)/2;(!o.radius||o.radius>c||o.radius<=1)&&(o.radius=c),this._options=o,this.draw()}return Object(s["a"])(t,[{key:"getCoordinate",value:function(t,e){var n=this._options.radius;return{x:n+t*Math.sin(e),y:n-t*Math.cos(e)}}},{key:"getCurrentTime",value:function(){var t=new Date,e="number"===typeof this._offset?new Date(t.getTime()+this._offset):t,n=[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],i=n[0],o=n[1],r=n[2],a=n[3],s=r+a/1e3,h=o+s/60,c=i+h/60,u=[c/12,h/60,s/60].map(function(t){return 2*t*Math.PI}),l=Object(C["a"])(u,3),d=l[0],f=l[1],p=l[2];return{date:e,hourDegree:d,minuteDegree:f,secondDegree:p,hour:i,minute:o,second:r}}},{key:"checkAlarms",value:function(t){var e=this._alarms;if(e&&e.length)for(var n=0;n<e.length;n++){var i=e[n];Math.abs(t.getTime()-i.time.getTime())<500&&(i.repeat||(this._alarms.splice(n,n+1),n--),i.cb())}}},{key:"addAlarm",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._alarms||(this._alarms=[]),this._alarms.push({time:t,cb:e,repeat:n})}},{key:"clearAlarms",value:function(){this._alarms=[]}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._requestId&&window.cancelAnimationFrame(this._requestId),t&&this._canvas&&this._canvas.parentNode.removeChild(this._canvas)}},{key:"offset",set:function(t){this._offset=t},get:function(){return this._offset}},{key:"alarms",get:function(){return this._alarms}}]),t}(),O=(n("7d57"),function(){var t=new Date;return{hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds(),offset:60*-(new Date).getTimezoneOffset()*1e3}}),D=[{name:"hours",label:"小时",max:23},{name:"minutes",label:"分钟",max:59},{name:"seconds",label:"秒",max:59}],E=[],T=-12;T<=12;T++){var j="UTC";T>0?j+="+".concat(T):T<0&&(j+=T),E.push({name:j,offset:60*T*60*1e3})}E.sort(function(t,e){return e.offset-t.offset});var P,L={name:"Clock",data:function(){return{time:O(),alarms:[]}},render:function(){var t=this,e=arguments[0];return e("div",{class:"clock"},[e("section",[e("canvas",{ref:"canvas"})]),"\n        ",e("section",[e("form",{class:"clock__time-from",on:{submit:function(e){e.preventDefault(),t.setTime()}}},[D.map(function(n){return e("div",{class:"form-group"},[e("label",{attrs:{for:n.name}},[n.label,"："]),"\n                ",e("input",{attrs:{type:"number",max:n.max,min:"0",step:"1"},domProps:{value:t.time[n.name]},on:{input:function(e){t.updateInput(e,n)}}})])}),"\n            ",e("div",{class:"form-group"},[e("label",{attrs:{for:"offset"}},["时区："]),"\n              ",e("select",{domProps:{value:this.time.offset},on:{change:this.updateZone}},[E.map(function(t){return e("option",{key:t.name,domProps:{value:t.offset}},[t.name])})])])])]),"\n        ",e("section",[e("div",{class:"clock__btns"},[e("button",{attrs:{type:"button"},on:{click:this.setTime}},["设置时间\n            "]),"\n            ",e("button",{attrs:{type:"button"},on:{click:this.addAlarm}},["设置闹钟\n            "]),"\n            ",e("button",{attrs:{type:"button"},on:{click:this.clearAlarms}},["清除闹钟\n            "]),"\n            ",e("button",{attrs:{type:"button"},on:{click:this.resetClock}},["还原时钟\n            "])])]),"\n\n        ",e("section",[e("div",{class:"clock__alarms"},[!this.alarms||this.alarms.length<1?e("p",["暂无闹钟"]):this.alarms.map(function(t,n){return e("p",{key:n},["闹铃时间：\n                  ",t.time.toLocaleString()])})])])])},methods:{updateInput:function(t,e){var n=Number(t.target.value),i=n;(x()(n)||n<0)&&(i=0),i>e.max&&(i=e.max),this.time[e.name]=i},updateZone:function(t){var e=Number(t.target.value),n=this.getTimezoneOffsetMilliSeconds(e);this.time.offset=e,this.$_clock.offset=n},getTimezoneOffsetMilliSeconds:function(t){return t+60*(new Date).getTimezoneOffset()*1e3},setTime:function(){var t=this.$_clock,e=new Date,n=this.getFormTime(),i=n.getTime()-e.getTime()+this.getTimezoneOffsetMilliSeconds(this.time.offset);t.offset=i},addAlarm:function(){var t=this.$_clock,e=this.getFormTime();t.addAlarm(e,this.triggerAlarm,!1),this.alarms=t.alarms},clearAlarms:function(){var t=this.$_clock;t.clearAlarms(),this.alarms=[]},getFormTime:function(){var t=new Date,e=[t.getFullYear(),t.getMonth(),t.getDate()],n=e[0],i=e[1],o=e[2],r=this.time,a=r.hours,s=r.minutes,h=r.seconds,c=new Date(n,i,o,a,s,h);return c},triggerAlarm:function(){var t=this.$_clock;this.alarms=t.alarms,u("闹钟响啦...")},resetClock:function(){var t=this.$_clock;r()(this.time,O()),t.offset=0}},mounted:function(){this.$_clock=new S(this.$refs.canvas)},beforeDestroy:function(){this.$_clock&&this.$_clock.destroy()}},I=n("e814"),$=n.n(I),H=n("5d73"),R=n.n(H),W=n("7618"),A=n("2d7d"),z=n.n(A),B=new z.a,V=0,N=function(t,e){if(e.touches){var n=t.getBoundingClientRect(),i=e.touches[0];return{x:i.clientX-n.left,y:i.clientY-n.top}}return{x:e.offsetX,y:e.offsetY}},Y=function(t,e){var n={};switch(Object(W["a"])(e)){case"function":n.onMove=e;break;case"object":r()(n,e);break;default:break}var i={last:null,move:function(e){if(e.target===t){var o=N(t,e);i.last=o,n.onMove&&n.onMove(o)}},start:function(e){e.preventDefault(),e.target===t&&(n.onStart&&n.onStart(N(t,e)),document.addEventListener("mousemove",i.move),document.addEventListener("touchmove",i.move))},end:function(){n.onEnd&&n.onEnd(i.last),document.removeEventListener("mousemove",i.move),document.removeEventListener("touchmove",i.move)},bind:function(){t.addEventListener("mousedown",i.start),t.addEventListener("touchstart",i.start),document.addEventListener("mouseup",i.end),document.addEventListener("touchend",i.end)},unbind:function(){i.end(),t.removeEventListener("mousedown",i.start),t.removeEventListener("touchstart",i.start),document.removeEventListener("mouseup",i.end),document.removeEventListener("touchend",i.end)}};return i.bind(),V++,B.set(V,i),V},G=function(t){var e=B.get(t);e&&(e.unbind(),B.delete(t))},F=n("bb15"),X=function(){function t(e,n){Object(a["a"])(this,t);var i={lineWidth:1,padding:10};M(e,n);n&&r()(i,n),this._options=i,this._canvas=e,this.init()}return Object(s["a"])(t,[{key:"init",value:function(){var t=this,e=this._canvas,n=e.getContext("2d"),i=this._options,o=i.width,r=i.height,a=i.lineWidth,s=i.padding,h=o-2*s,c=r-2*s;n.lineWidth=a,this._ctx=n,this._contentWidth=h,this._contentHeight=c,this.initBackground(),this._id=Y(e,function(e){var n=e.x,i=e.y;t.setCoordinate(n,i)})}},{key:"initBackground",value:function(){var t=this._ctx,e=(this._color,this._options),n=e.padding,i=e.width,o=e.height,r=t.createLinearGradient(i/2,o-n,i/2,n),a=t.createLinearGradient(n,o/2,i-n,o/2);a.addColorStop(0,"#fff"),a.addColorStop(1,"rgba(0,0,0,0)"),r.addColorStop(0,"#000"),r.addColorStop(1,"rgba(0,0,0,0)"),this._whiteGradient=a,this._blackGradient=r}},{key:"fillColor",value:function(){var t=this._ctx,e=this._contentWidth,n=this._contentHeight,i=this._hue,o=this._options.padding;i&&(t.save(),t.fillStyle=i,t.fillRect(o,o,e,n),t.restore(),[this._whiteGradient,this._blackGradient].forEach(function(i){t.fillStyle=i,t.fillRect(o,o,e,n),t.restore()}))}},{key:"setCoordinate",value:function(t,e){var n,i,o=this._options.padding,r=this._contentHeight,a=this._contentWidth;if(n=t<o?o:t>a+o?a+o:t,i=e<o?o:e>r+o?r+o:e,this._x=n,this._y=i,this._options.onColorChange){var s={h:this.color.h,s:(n-o)/a,v:1-(i-o)/r};this._color=s,this._options.onColorChange(s)}this.draw()}},{key:"renderPointer",value:function(){var t=this._options.padding,e=this._x,n=this._y;if(void 0!==e&&void 0!==n){var i=this._ctx;i.save(),i.strokeStyle="#000",i.beginPath(),i.arc(e,n,t/2,0,2*Math.PI),i.stroke(),i.restore(),i.strokeStyle="#fff",i.beginPath(),i.arc(e,n,t/2-this._options.lineWidth,0,2*Math.PI),i.stroke(),i.restore()}}},{key:"updateHue",value:function(){var t=this._color&&this._color.h;if("number"===typeof t){var e=F["hsv"].rgb(t,100,100),n=Object(C["a"])(e,3),i=n[0],o=n[1],r=n[2];this._hue="rgb(".concat(i,",").concat(o,",").concat(r,")")}}},{key:"updateCoordinate",value:function(){var t=this._contentWidth,e=this._contentHeight,n=this._options;this._x=this._color.s*t+n.padding,this._y=(1-this.color.v)*e+n.padding}},{key:"draw",value:function(){var t=this._ctx,e=(this._x,this._y,this._options),n=e.width,i=e.height;t.clearRect(0,0,n,i),this.fillColor(),this.renderPointer()}},{key:"destroy",value:function(t){G(this._id),t&&this._canvas.parentNode.removeChild(this._canvas)}},{key:"color",set:function(t){var e=this,n=["h","s","v"],i=r()({},this._color,t),o={h:i.h,s:i.s,v:i.v};this._color&&n.every(function(t){return o[t]===e._color[t]})||(this._color=o,this.updateHue(),this.updateCoordinate(),this.draw())},get:function(){return this._color}}]),t}(),U=function(){function t(e,n){Object(a["a"])(this,t);var i={lineWidth:1,padding:10};M(e,n);n&&r()(i,n),this._options=i,this._canvas=e,this.init()}return Object(s["a"])(t,[{key:"init",value:function(){for(var t=this,e=this._options,n=e.padding,i=e.width,o=e.height,r=this._canvas,a=r.getContext("2d"),s=a.createLinearGradient(n,n,n,o-2*n),h=0;h<=6;h++){var c=h/6,u=F["hsv"].rgb(360*c,100,100),l=Object(C["a"])(u,3),d=l[0],f=l[1],p=l[2];s.addColorStop(h/6,"rgb(".concat(d,",").concat(f,",").concat(p,")"))}this._contentWidth=i-2*n,this._contentHeight=o-2*n,this._gradient=s,this._ctx=a,a.lineWidth=this._options.lineWidth,this._id=Y(r,function(e){t.setCoordinate(e.y)})}},{key:"fillBackground",value:function(){var t=this._gradient,e=this._ctx,n=this._options,i=n.padding;n.width,n.height;e.fillStyle=t,e.fillRect(i,i,this._contentWidth,this._contentHeight)}},{key:"setCoordinate",value:function(t){var e,n=this._options,i=n.padding,o=n.height;if(e=t<i?i:t>o-i?o-i:t,this._y!==e){if(this._y=e,this._options.onColorChange){var r=(e-i)/this._contentHeight,a=Math.floor(360*r),s={h:a};this._color=s,this._options.onColorChange(s)}this.draw()}}},{key:"renderSlider",value:function(){if("number"===typeof this._y){var t=this._options,e=t.padding,n=t.width,i=(t.height,t.lineWidth),o=this._y,r=n,a=e/2,s=this._ctx;s.save(),s.strokeStyle="#000",s.strokeRect(0,o-a/2,r,a),s.strokeStyle="#fff",s.strokeRect(i,o-a/2+i,r-2*i,a-2*i),s.stroke(),s.restore()}}},{key:"draw",value:function(){var t=this._options,e=t.width,n=t.height;this._ctx.clearRect(0,0,e,n),this.fillBackground(),this.renderSlider()}},{key:"destroy",value:function(t){G(this._id),t&&this._canvas.parentNode.removeChild(this._canvas)}},{key:"color",set:function(t){if(!this._color||t.h!==this._color.h){var e=this._options.padding,n=t.h/360,i=this._contentHeight*n+e;this.setCoordinate(i)}},get:function(){return this._color}}]),t}(),q=function(){function t(e,n){Object(a["a"])(this,t);var i={height:300,blockWidth:300,barWidth:40,padding:10};r()(i,n),this._options=i,this._container=e,this.init()}return Object(s["a"])(t,[{key:"init",value:function(){var t=this,e=this._options,n=(e.padding,e.height),i=e.blockWidth,o=e.barWidth,r=(e.onColorChange,document.createElement("canvas")),a=document.createElement("canvas"),s={width:i,height:n,onColorChange:function(e){var n=e.s,i=e.v;t.setHSV({s:n,v:i})}},h={width:o,height:n,onColorChange:function(e){var n=e.h;t.setHSV({h:n})}};this._container.appendChild(r),this._container.appendChild(a),this._block=new X(r,s),this._bar=new U(a,h),this.setHSV({h:0,s:.5,v:.5})}},{key:"handleColorChange",value:function(t){if("number"===typeof t.h&&(this._bar.color=t),"number"===typeof t.s&&"number"===typeof t.v&&(this._block.color=t),this._options.onColorChange){var e=t.h,n=100*t.s,i=100*t.v,o=F["hsv"].rgb(e,n,i),r=F["rgb"].hsl(o).map(function(t){return t/100}),a=F["rgb"].hex(o);this._options.onColorChange({hex:a,h:r[0],s:r[1],l:r[2],r:o[0],g:o[1],b:o[2]})}}},{key:"setHSV",value:function(t){var e=this;if(this._bar&&this._block){t=r()({},this._color,t);var n=["h","s","v"];this._color&&n.every(function(n){return t[n]===e._color[n]})||(this._color=t,this.handleColorChange(t))}}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._block.destroy(t),this._bar.destroy(t)}},{key:"color",set:function(t){var e,n=["r","g","b"],i=["h","s","l"];if(n.every(function(e){return"number"===typeof t[e]}))e=F["rgb"].hsv(t.r,t.g,t.b);else if(i.every(function(e){return"number"===typeof t[e]}))e=F["hsl"].hsv(100*t.h,100*t.s,100*t.l);else{if(!t.hex)return;e=F["rgb"].hsv(F["hex"].rgb(t.hex))}this.setHSV({h:e[0],s:e[1]/100,v:e[2]/100})}}]),t}(),J=(n("d2d2"),{name:"ColorPicker",data:function(){return{color:{r:null,g:null,b:null,h:null,s:null,l:null,hex:""}}},render:function(){var t=this,e=arguments[0];return e("div",{class:"color-picker"},[e("section",{class:"picker-wrapper"},[e("div",{attrs:{id:"picker"},ref:"picker"})]),"\n        ",e("section",[e("form",{on:{submit:function(t){t.preventDefault()}}},[e("div",{class:"row"},[["r","g","b"].map(function(n){return e("div",{class:"form-group"},[e("label",{attrs:{for:n}},[n.toUpperCase(),":"]),"\n                  ",e("input",{attrs:{type:"number",max:"255",min:"0",step:"1"},domProps:{value:t.color[n]},on:{input:function(e){return t.updateInput(e,n)}}})])})]),"\n            ",e("div",{class:"row"},[["h","s","l"].map(function(n){return e("div",{class:"form-group"},[e("label",{attrs:{for:n}},[n.toUpperCase(),":"]),"\n                  ",e("input",{attrs:{type:"number",max:"1",min:"0",step:"0.05"},domProps:{value:t.color[n]},on:{input:function(e){return t.updateInput(e,n)}}})])})]),"\n\n            ",e("div",{class:"row"},[e("div",{class:"form-group"},[e("label",{attrs:{for:"hex"}},["#"]),"\n                ",e("input",{domProps:{value:this.color.hex.toUpperCase()},attrs:{type:"text"},on:{input:this.updateColorByHEX}})])])])]),"\n        ",e("section",[e("div",{class:"color-picker__preview",style:{backgroundColor:"#"+this.color.hex}})])])},methods:{updateInput:function(t,e){var n=t.target,i=Number(n.value),o=Number(n.getAttribute("max")),a=Number(n.getAttribute("min")),s=i;x()(i)&&(s=a),s>o&&(s=o),s<a&&(s=a);var h=r()({},this.color);switch(h[e]=s,e){case"r":case"g":case"b":this.updateColorByRGB(h);break;case"h":case"s":case"l":this.updateColorByHSL(h);break;default:break}},updateColorByRGB:function(t){var e=t.r,n=t.g,i=t.b;[e,n,i].some(function(t){return"number"!==typeof t})||(this.$_picker.color={r:e,g:n,b:i})},updateColorByHSL:function(t){var e=t.h,n=t.s,i=t.l;[e,n,i].some(function(t){return"number"!==typeof t})||(this.$_picker.color={h:e,s:n,l:i})},updateColorByHEX:function(t){var e=t.target.value;if(6===e.length){var n=!0,i=!1,o=void 0;try{for(var r,a=R()(e);!(n=(r=a.next()).done);n=!0){var s=r.value,h=$()(s,16);if(x()(h)||h>15)return}}catch(c){i=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}this.$_picker.color={hex:e}}}},mounted:function(){var t=this;this.$_picker=new q(this.$refs.picker,{onColorChange:function(e){r()(t.color,e)}})},beforeDestroy:function(){this.$_picker&&this.$_picker.destroy()}}),K=(n("96cf"),n("3b8d")),Z=(n("4917"),n("a4bb")),Q=n.n(Z),tt=n("795b"),et=n.n(tt),nt=n("a745"),it=n.n(nt),ot=n("bd86");(function(t){t[t["cropper"]=0]="cropper",t[t["image"]=1]="image",t[t["pointRD"]=2]="pointRD",t[t["background"]=3]="background"})(P||(P={}));var rt=function(){function t(e,n){var i,o=this;Object(a["a"])(this,t),this._scale=1,this.handleStart=function(t){o._startPoint=o.getPointByCoordinate(t.x,t.y)},this.handleMove=function(t){var e=o._types[o._startPoint.type];e&&e.handler&&e.handler(t)},this.handleMouseWheel=function(t){t.preventDefault();var e=o._image;if(e){var n,i=e.clientWidth,r=e.clientHeight,a=o._scale,s=t.deltaY/800;n=s>0?1/(1+s):1+Math.abs(s),n*=a,o._scale=n,i*=n,r*=n,e.x+=(e.width-i)/2,e.y+=(e.height-r)/2,e.width=i,e.height=r,o.draw()}},this.handleImageMove=function(t){var e=t.x,n=t.y,i=o._startPoint;o._image.x=e-i.offsetX,o._image.y=n-i.offsetY,o.draw()},this.handleCropperMove=function(t){var e=t.x,n=t.y,i=o._options,r=i.width,a=i.height,s=o._startPoint,h=s.offsetX,c=s.offsetY,u=r-o._cropper.width,l=a-o._cropper.height,d=e-h,f=n-c;d<0&&(d=0),d>u&&(d=u),f<0&&(f=0),f>l&&(f=l),o.cropper={x:d,y:f}},this.handlePointMove=function(t){var e=t.x,n=t.y,i=(o._startPoint,e-o._cropper.x),r=n-o._cropper.y;i<=0||r<=0||(o.cropper={width:i,height:r})};var s=M(e,n,{width:700,height:450}),h=r()({},n,{width:s.width,heigth:s.height});this._canvas=s.canvas,this._ctx=s.canvas.getContext("2d"),this._options=h,this._types=(i={},Object(ot["a"])(i,P.cropper,{cursor:"all-scroll",handler:this.handleCropperMove}),Object(ot["a"])(i,P.image,{cursor:"default",handler:this.handleImageMove}),Object(ot["a"])(i,P.pointRD,{cursor:"nwse-resize",handler:this.handlePointMove}),Object(ot["a"])(i,P.background,{cursor:"default"}),i),this.init()}return Object(s["a"])(t,[{key:"init",value:function(){var t=this._options,e=this._canvas,n=t.width/3,i=t.height/3;this._cropperCanvas=document.createElement("canvas"),this._cropperCtx=this._cropperCanvas.getContext("2d"),this.cropper={width:n,height:i,x:(t.width-n)/2,y:(t.height-i)/2},t.preview&&(this._previewList=(it()(t.preview)?t.preview:[t.preview]).map(function(t){var e=document.createElement("canvas");return t.container.appendChild(e),Object(_["a"])({},t,{canvas:e,ctx:e.getContext("2d")})})),e.addEventListener("mousewheel",this.handleMouseWheel),this._id=Y(e,{onStart:this.handleStart,onMove:this.handleMove})}},{key:"getPointByCoordinate",value:function(t,e){var n=this._point,i=this._cropper,o=this._image,r={x:t,y:e};return n&&t>n.x&&t<n.x+n.width&&e>n.y&&e<n.y+n.height?r.type=P.pointRD:i&&t>i.x&&t<i.x+i.width&&e>i.y&&e<i.y+i.height?(r.offsetX=t-i.x,r.offsetY=e-i.y,r.type=P.cropper):o&&t>o.x&&t<o.x+o.width&&e>o.y&&e<o.y+o.height?(r.offsetX=t-o.x,r.offsetY=e-o.y,r.type=P.image):r.type=P.background,r}},{key:"updatePoint",value:function(){var t=this._cropper,e=8,n=8;this._point={width:e,height:n,x:t.x+t.width-e/2,y:t.y+t.height-n/2}}},{key:"fillBackground",value:function(){var t=this._options,e=t.width,n=t.height,i=this._ctx,o=e/40,r=Math.ceil(e/o),a=Math.ceil(n/o);i.save(),i.fillStyle="#ccc";for(var s=0,h=0;h<a;h++)for(var c=0;c<r;c++)(s+h)%2===0&&i.fillRect(c*o,h*o,o,o),s++;i.fillStyle="rgba(0,0,0,0.1)",i.fillRect(0,0,e,n),i.restore()}},{key:"fillImage",value:function(){var t=this._ctx,e=this._image;e&&t.drawImage(e.element,e.x,e.y,e.width,e.height)}},{key:"fillCropper",value:function(){var t=this._ctx,e=this._cropper;t.save(),t.strokeStyle="#39f",t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#39f";var n=this._point;t.fillRect(n.x,n.y,n.width,n.height),t.restore()}},{key:"getCropperData",value:function(){var t=this._image,e=this._cropper,n=[e.x,e.y,e.height,e.width],i=n[0],o=n[1],r=n[2],a=n[3],s=0,h=0;if(e.x<t.x&&(i=t.x,s=t.x-e.x,a-=s),e.y<t.y&&(o=t.y,h=t.y-e.y,r-=h),e.x+e.width>t.x+t.width&&(a-=e.x+e.width-(t.x+t.width)),e.y+e.height>t.y+t.height&&(r-=e.y+e.height-(t.y+t.height)),!(a<0||r<0))return{width:a,height:r,x:i,y:o,offsetX:s,offsetY:h,imageData:this._ctx.getImageData(i,o,a,r)}}},{key:"draw",value:function(){var t=this._options,e=t.width,n=t.height;this._ctx.clearRect(0,0,e,n),this.fillBackground(),this.fillImage(),this.fillCropper(),this.preview()}},{key:"updateImage",value:function(t){if(t.src){var e=this._options,n=e.width,i=e.height,o=t.width,r=t.height,a=o,s=r,h=1;o>n&&(a=n,h=a/o,s=h*r),s>i&&(s=i,h=s/r,a=h*o),this._image={element:t,width:a,height:s,x:(n-a)/2,y:(i-s)/2,clientWidth:o,clientHeight:r},this._scale=h,this.draw()}}},{key:"preview",value:function(){if(this._previewList&&this._image){this._scale;var t=this._image,e=this._cropper;this._options;this._previewList.forEach(function(n){var i=e.width*n.zoom,o=e.height*n.zoom;n.canvas.width=i,n.canvas.height=o,n.ctx.clearRect(0,0,i,o),n.ctx.drawImage(t.element,(t.x-e.x)*n.zoom,(t.y-e.y)*n.zoom,t.width*n.zoom,t.height*n.zoom)})}}},{key:"crop",value:function(){var e=this;return new et.a(function(n,i){var o=e._options,a=o.width,s=o.height,h=e._image,c=e._cropper,u=e._cropperCtx,l=e._scale;h.element||i({code:1001,message:t.Messages["1001"]}),r()(e._cropperCanvas,{width:c.width,height:c.height}),u.clearRect(0,0,a,s),u.drawImage(h.element,(h.x-c.x)*l,(h.y-c.y)*l,h.width*l,h.height*l);var d=e._cropperCanvas.toDataURL();n(d)})}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=function(t){return t.parentNode.removeChild(t)};G(this._id),window.removeEventListener("mousewheel",this.handleMouseWheel),t&&(e(this._canvas),this._previewList&&this._previewList.forEach(function(t){e(t.canvas)}))}},{key:"image",set:function(t){var e=this;if(t instanceof HTMLImageElement)this.updateImage(t);else{if(!(t instanceof File))return;if(!t.type.match(/^image\/.+$/))return void u("请选择正确的图片文件");var n=new FileReader;n.onload=function(t){var n=new Image;n.src=t.target.result,n.onload=function(){e.updateImage(n)}},n.readAsDataURL(t)}},get:function(){return this._image.element}},{key:"cropper",set:function(t){var e=this;this._cropper||(this._cropper={});var n=!1;Q()(t).forEach(function(i){var o=Math.round(t[i]);e._cropper[i]!==o&&(e._cropper[i]=o,n=!0)}),n&&(this.updatePoint(),this._options.onCropperChange&&this._options.onCropperChange(this._cropper),this.draw())},get:function(){return this._cropper}}]),t}();rt.Messages={1001:"没有图片"};var at,st,ht,ct=n("6175"),ut=(n("4189"),document.createElement("a")),lt=0,dt={name:"Cropper",props:{window:{required:!0,type:Object}},data:function(){return{cropperOptions:{width:200,height:200,x:0,y:0},pickText:"点击选择要裁剪的图片",preview:[.6,.9,1.2]}},render:function(t){var e=this;return t("div",{class:"cropper"},[t("section",[t("form",[t("div",{class:"form-group"},[t("input",{attrs:{placeholder:"宽",type:"number",min:"0",max:this.containerSize.width,name:"width"},domProps:{value:this.cropperOptions.width},on:{input:function(t){e.updateSize(t,"width")}}}),"\n              ",t("input",{attrs:{placeholder:"高",type:"number",min:"0",max:this.containerSize.height,name:"height"},domProps:{value:this.cropperOptions.height},on:{input:function(t){e.updateSize(t,"height")}}})]),"\n            ",t("div",{class:"form-group"},[t("button",{attrs:{type:"button"},on:{click:this.setCropper}},["修改大小\n              "]),"\n              ",t("button",{attrs:{type:"button"},on:{click:this.doCrop}},["裁剪\n              "])]),"\n            ",t("div",{class:"form-group"},[t("label",{attrs:{for:"file",id:"pick-file"},class:"cropper__pick"},[this.pickText]),"\n              ",t("input",{attrs:{type:"file",id:"file",accept:"image/jpeg,image/x-icon,image/png"},on:{change:this.uploadImg}})])])]),"\n        ",t("section",[t("div",{ref:"container",class:"cropper__container"})]),"\n        ",t("section",[this.preview.map(function(e){return t("div",{class:"cropper__preview",ref:"preview-".concat(e)})})])])},computed:{containerSize:function(){var t=this.window,e=t.width,n=t.height;if(e>767)return{width:700,height:450};var i=Math.min(e,n);return{width:i,height:i}}},methods:{updateSize:function(t,e){var n=this.cropperOptions,i=this.containerSize,o=Number(t.target.value),r=o;(x()(o)||o<=0)&&(r=1),o>i[e]&&(r=i[e]),n[e]=r},uploadImg:function(t){var e=t.target;if(e.value&&!(e.files.length<1)){var n=e.files[0];n.type.match(/^image\/.+/)?(this.$_cropper.image=n,this.pickText=n.name):u("请选择正确的图片")}},setCropper:function(){if(this.$_cropper){var t=this.cropperOptions,e=t.width,n=t.height,i=[e,n].some(function(t){return[function(t){return!!t},function(t){return t>0}].some(function(e){return!e(t)})});i?u("请输入正确的宽高!"):this.$_cropper.cropper={width:e,height:n}}},doCrop:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$_cropper.crop();case 3:e=t.sent,ut.href=e,ut.download="dingjs-cropper-".concat(++lt,".png"),ut.click(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),u('不支持HTML5,建议使用<a href="https://www.google.com/chrome/">「Chrome浏览器」浏览本页面!</a>');case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),init:function(){var t=this,e=this.containerSize,n=e.width,i=e.height;this.$_cropper=new rt(this.$refs.container,{preview:this.preview.map(function(e,n){return{zoom:e,container:t.$refs["preview-".concat(e)]}}),width:n,height:i,onCropperChange:function(e){r()(t.cropperOptions,e)}}),this.setDefault()},setDefault:function(){var t=this,e=new Image;e.src=ct,e.onload=function(){t.$_cropper.image=e}}},mounted:function(){this.init()},beforeDestroy:function(){this.$_cropper.destroy()}},ft=function(){function t(e){var n=this;Object(a["a"])(this,t),this.dataset=[],this.more=!0,this.loading=!1,this.scrollEventSource=window,this.debounceCheckdataset=l(function(){return n.checkDataset()},100);for(var i={contentElement:null,scrollElement:document.documentElement,getDataset:null,noDataHtml:"",loadingHtml:"",threshold:400,autoDestroy:!0,render:function(t,e){return"<div>".concat(e,"</div>")}},o=["contentElement","getDataset"],s=0;s<o.length;s++){var h=o[s];if(!e[h])return void console.warn("Option: ".concat(h," can not be empty"))}e.scrollElement&&(this.scrollEventSource=e.scrollElement),r()(i,e),this.op=i,this.init()}return Object(s["a"])(t,[{key:"shouldGetDataset",value:function(){var t=this.op,e=t.scrollElement,n=t.threshold,i=e.scrollHeight-e.scrollTop-e.clientHeight;return!this.dataset.length||!this.loading&&this.more&&i<n}},{key:"checkDataset",value:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.shouldGetDataset()){t.next=4;break}return t.next=3,this.fillMoreDataset();case 3:this.checkDataset();case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"fillMoreDataset",value:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.op.getDataset(this.dataset.length);case 3:e=t.sent,this.loading=!1,e.dataset&&e.dataset.length&&(this.dataset=this.dataset.concat(e.dataset),this.more=e.more,!this.more&&this.op.autoDestroy&&this.destroy(),this.updateView());case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"updateView",value:function(){var t,e=this.op,n=e.render,i=e.contentElement,o=e.noDataHtml,r=e.loadingHtml;t=this.dataset.map(n).join(""),t||this.loading?this.more&&(t+=r):t=o,i.innerHTML=t}},{key:"destroy",value:function(){this.scrollEventSource.removeEventListener("scroll",this.debounceCheckdataset)}},{key:"init",value:function(){this.scrollEventSource.addEventListener("scroll",this.debounceCheckdataset),this.checkDataset(),this.updateView()}}]),t}(),pt=(n("ce93"),new Array(100).fill("").map(function(t,e){return e+1})),vt={name:"InfiniteScroll",render:function(){var t=arguments[0];return t("main",{class:"infinite-scroll"},[t("ul",{ref:"list",class:"infinite-scroll__list"})])},mounted:function(){this.$_infiniteScroll=new ft({contentElement:this.$refs.list,loadingHtml:'\n        <p class="infinite-scroll__loading">\n          <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n            <path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" />\n            <path d="M0 0h24v24H0z" fill="none" />\n          </svg>\n        </p>\n      ',noDataHtml:"<p>Empty</p>",render:function(t){return"<li>".concat(t," list item</li>")},getDataset:function(t){return new et.a(function(e){setTimeout(function(){e({dataset:pt.slice(t,t+20),more:t+20<pt.length})},1e3)})}})}},mt=n("0a0d"),gt=n.n(mt),_t=function(){function t(e){Object(a["a"])(this,t),this._spend=0,this._complete=!1;var n=e.x,i=e.y;this._init={x:n,y:i},this._current={x:n,y:i},this._options=e}return Object(s["a"])(t,[{key:"to",value:function(t,e){return this._next=t,this._time=e,this}},{key:"start",value:function(){return this._prevTime=gt()(),this.update(),this}},{key:"update",value:function(){var t=gt()();if(this._spend=this._spend+(t-this._prevTime),this._spend>=this._time)this._complete=!0;else{this._prevTime=t;var e=this._spend/this._time;this._current={x:this._init.x+(this._next.x-this._init.x)*e,y:this._init.y+(this._next.y-this._init.y)*e},this._options.onUpdate(this._current)}}},{key:"complete",get:function(){return this._complete}}]),t}();(function(t){t[t["empty"]=0]="empty",t[t["wall"]=1]="wall",t[t["body"]=2]="body",t[t["head"]=3]="head",t[t["footer"]=4]="footer",t[t["food"]=5]="food"})(at||(at={})),function(t){t[t["left"]=0]="left",t[t["right"]=1]="right",t[t["up"]=2]="up",t[t["down"]=3]="down"}(st||(st={})),function(t){t[t["beforeStart"]=0]="beforeStart",t[t["end"]=1]="end",t[t["pause"]=2]="pause",t[t["running"]=3]="running",t[t["disabled"]=4]="disabled"}(ht||(ht={}));var yt=function(){function t(e,n){var i,o,s=this;Object(a["a"])(this,t),this._boxes=[],this._speed=1,this._boxTypes=(i={},Object(ot["a"])(i,at.empty,{}),Object(ot["a"])(i,at.wall,{background:"brown"}),Object(ot["a"])(i,at.head,{background:"#555",render:function(t,e,n,i){var o=i/14,r=s._direction[s._snakeDirection],a=i/2,h=[{x:e+a+r.x*o*3+(0===r.x?2.5*o:0),y:n+a+r.y*o*3+(0===r.y?2.5*o:0)},{x:e+a+r.x*o*3+(0===r.x?2.5*-o:0),y:n+a+r.y*o*3+(0===r.y?2.5*-o:0)}];t.fillStyle="#fff",h.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,2*o,0,2*Math.PI),t.fill()})}}),Object(ot["a"])(i,at.body,{render:function(t,e,n,i){t.fillStyle="#888",t.beginPath(),t.arc(e+i/2,n+i/2,i/2,0,2*Math.PI),t.fill()}}),Object(ot["a"])(i,at.footer,{render:function(t,e,n,i){t.fillStyle="#888",t.beginPath(),t.arc(e+i/2,n+i/2,.35*i,0,2*Math.PI),t.fill()}}),Object(ot["a"])(i,at.food,{background:"orange"}),i),this._direction=(o={},Object(ot["a"])(o,st.left,{x:-1,y:0,keyCode:[65,37],opposite:st.right}),Object(ot["a"])(o,st.right,{x:1,y:0,keyCode:[68,39],opposite:st.left}),Object(ot["a"])(o,st.up,{x:0,y:-1,keyCode:[87,38],opposite:st.down}),Object(ot["a"])(o,st.down,{x:0,y:1,keyCode:[83,40],opposite:st.up}),o),this.handleKeyboard=function(t){var e=s._direction,n=t.keyCode,i=s._status;switch(n){case 32:switch(t.preventDefault(),i){case ht.pause:s.continue();break;case ht.running:s.pause();break;default:break}break;default:break}for(var o in e)e[o].keyCode.indexOf(n)>-1&&(t.preventDefault(),s.pushDirection(+o))},this.next=function(){if(s._status===ht.running){s.updateDirection();var t=s._speed>30?1:300-10*s._speed,e=s._snake,n=s._direction[s._snakeDirection],i=s._content,o=e[0],r=e[e.length-1],a=o.xIndex+n.x,h=o.yIndex+n.y,c=s.getBox(a,h);if(c&&a>=0&&a<i.columns&&h>=0&&h<i.rows){var u=[s.createTween(o,c,t)],l=function(){var t=!0;switch(e.forEach(function(t){delete t.animateX,delete t.animateY}),c.type){case at.empty:r.type=at.empty,e.pop();break;case at.food:var n=s.eat(c);void 0===n||n||(t=!1);break;default:return}e.unshift(c),s.updateSnake(),t&&s._status===ht.running&&s.next(),s.draw()},d=function t(e){var n=!0;u.forEach(function(t){t.update(),n&&!t.complete&&(n=!1)}),s.draw(),n?(s._animation=null,l()):s.updateAnimation(u,t)};if(c.type===at.body||c.type===at.footer)return s.draw(),void s.endGame("1001");if(c.type===at.wall)return s.draw(),void s.endGame("1002");for(var f=1,p=e.length;f<p;f++){var v=e[f],m=e[f-1];u.push(s.createTween(v,m,t))}s.updateAnimation(u,d)}else s.endGame("1003")}};var h={sideLength:18},c=M(e,n,{width:600,height:600});if(r()(h,n,{width:c.width,height:c.height}),!h.origin){h.origin=[];for(var u=6;u>2;u--)h.origin.push({x:u,y:4})}var l=h.sideLength,d=h.width%l/2,f=h.height%l/2,p=h.width-2*f,v=h.height-2*d;this._content={x:f,y:d,width:p,height:v,rows:p/l,columns:v/l},this._canvas=c.canvas,this._options=h,this.init()}return Object(s["a"])(t,[{key:"init",value:function(){var t=this,e=this._options,n=this._canvas,i=n.getContext("2d"),o=this._content,r=e.sideLength;this._ctx=i;for(var a=0;a<o.columns;a++){for(var s=[],h=0;h<o.rows;h++)s.push({x:o.x+a*r,y:o.y+h*r,xIndex:a,yIndex:h,type:at.empty});this._boxes.push(s)}this.reset(),this.drawMap(),this._status=ht.disabled,this._id=Y(n,{onStart:function(e){t._startCoordinate=e},onEnd:function(e){if(t._startCoordinate){var n=Math.PI,i={x:t._startCoordinate.x,y:-t._startCoordinate.y},o={x:e.x,y:-e.y},r=Math.acos((o.x-i.x)/Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2))),a=st.right;r>.25*n&&r<.75*n?a=st.up:r>.75*n&&(a=st.left),o.y-i.y<0&&a===st.up&&(a=st.down),t.pushDirection(a)}}}),window.addEventListener("keydown",this.handleKeyboard)}},{key:"pushDirection",value:function(t){var e=this._status;e===ht.running?this._keys.push(t):e===ht.beforeStart&&(this._keys.push(t),this.start())}},{key:"getBox",value:function(t,e){var n=this._boxes,i=n[t];if(i)return i[e]}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=this._ctx,i=this._options,o=this._content;n.save(),n.fillStyle="rgba(0,0,0,.6)",n.fillRect(o.x,o.y,o.width,o.height),n.fillStyle="#fff",n.textAlign="center",n.textBaseline="middle",n.font="bold "+e+"px serif",it()(t)||(t=[t]),t.forEach(function(t,r){n.fillText(t,.5*i.width,.4*i.height+i.sideLength*e*1.1*r,o.width-2*i.sideLength)}),n.restore()}},{key:"drawBox",value:function(t){var e=this._boxTypes,n=this._ctx,i=this._options.sideLength,o=e[t.type],r=t.animateX?t.animateX:t.x,a=t.animateY?t.animateY:t.y;o.background&&(n.save(),n.fillStyle=o.background,n.fillRect(r,a,i,i),n.restore()),o.render&&(n.save(),o.render(n,r,a,i),n.restore())}},{key:"drawMap",value:function(){var t=this._options,e=this._ctx,n=this._content,i=t.sideLength;e.save(),e.beginPath(),e.strokeStyle="#ddd",e.lineWidth=1;for(var o=0;o<=n.columns;o++){var r=n.x+o*i;e.moveTo(r,n.y),e.lineTo(r,n.y+n.height)}for(var a=0;a<=n.rows;a++){var s=n.y+a*i;e.moveTo(n.x,s),e.lineTo(n.x+n.width,s)}e.stroke(),e.restore()}},{key:"drawContent",value:function(){var t=this;this._ctx.save(),this._food.forEach(function(e){t.drawBox(e)}),this._boxes.forEach(function(e){e.forEach(function(e){var n=e.type;n!==at.food&&t.drawBox(e)})}),this._ctx.restore()}},{key:"draw",value:function(){var t=this._options,e=this._ctx;e.clearRect(0,0,t.width,t.height),this.drawMap(),this.drawContent()}},{key:"updateAnimation",value:function(t,e){this._animation={cb:e,id:requestAnimationFrame(e),tweens:t}}},{key:"createTween",value:function(t,e,n){var i=new _t({x:t.x,y:t.y,onUpdate:function(e){r()(t,{animateX:e.x,animateY:e.y})}}).to({x:e.x,y:e.y},n).start();return i}},{key:"updateDirection",value:function(){var t=this._keys,e=t.length;if(e>0)for(var n=e-1;n>=0;n--){var i=t[n];if(i!==this._snakeDirection&&i!==this._direction[this._snakeDirection].opposite){this._snakeDirection=i,this._keys=t.slice(n+1);break}}}},{key:"updateSnake",value:function(){var t=this._snake;t.forEach(function(t){t.type=at.body}),t[0].type=at.head,t[t.length-1].type=at.footer}},{key:"pauseGame",value:function(t){var e=this;this._status===ht.running&&(this._animation?(cancelAnimationFrame(this._animation.id),t()):requestAnimationFrame(function(){e.pauseGame(t)}))}},{key:"pause",value:function(){var t=this;this.pauseGame(function(){t._status=ht.pause,t.info("Pause")})}},{key:"continue",value:function(){this._status===ht.pause&&(this._animation?(this._animation.tweens.forEach(function(t){t.complete||t.start()}),this._status=ht.running,this.updateAnimation(this._animation.tweens,this._animation.cb)):this.continue())}},{key:"eat",value:function(t){var e=this.score,n=this._food;if(this._food=n.splice(n.indexOf(t)),this.createFood(),this._options.scoreCallback)return this._options.scoreCallback(e,this.speed,this)}},{key:"createFood",value:function(){var t=this._content,e=Math.floor(Math.random()*t.columns),n=Math.floor(Math.random()*t.rows),i=this.getBox(e,n);return i.type!==at.empty?this.createFood():(i.type=at.food,this._food.push(i),i)}},{key:"reset",value:function(){var t=this;this._status=ht.beforeStart,this._food=[],this._wall=[],this._keys=[],this._snakeDirection=st.right,this._boxes.forEach(function(t){t.forEach(function(t){t.type=at.empty})}),this._snake=this._options.origin.map(function(e){return t.getBox(e.x,e.y)}),this.updateSnake(),this.createFood()}},{key:"start",value:function(){this._status=ht.running,this.draw(),this.next()}},{key:"endGame",value:function(e){this._options.endCallback&&this._options.endCallback({code:Number(e),message:t.EndReasons[e]},this),this._status=ht.end}},{key:"nextLevel",value:function(t){var e=this;this.pauseGame(function(){e.info(t),e._status=ht.end})}},{key:"fillWall",value:function(t){var e=this._content,n=0;while(n<t){var i=this.getBox(Math.floor(Math.random()*e.columns),Math.floor(Math.random()*e.rows));i.type===at.empty&&(i.type=at.wall,this._wall.push(i),n++)}}},{key:"disable",value:function(){var t=this,e=this._status;return this._status=ht.disabled,function(){t._status=e}}},{key:"prepareStart",value:function(){this.reset(),this.draw()}},{key:"destroy",value:function(){G(this._id),window.removeEventListener("keydown",this.handleKeyboard)}},{key:"speed",set:function(t){this._speed=t},get:function(){return this._speed}},{key:"score",get:function(){return this._snake&&this._snake.length?this._snake.length-this._options.origin.length+1:0}}]),t}();yt.EndReasons={1001:"红烧蛇肉",1002:"撞墙啦",1003:"撞边界啦"};n("f24f");var bt=i["a"].extend({data:function(){return{message:"",title:"",cb:null,visible:!1}},render:function(){var t=arguments[0],e=this.cb,n=e?{click:e}:{};return t("transition",{attrs:{name:"fade"},on:{"after-leave":this.doDestroy}},[t("div",{class:"message__wrapper",directives:[{name:"show",value:this.visible}]},[t("div",{class:"message__mask"}),"\n          ",t("div",{class:"message"},[t("header",{class:"message__header"},[this.title]),"\n            ",t("div",{class:"message__content"},[this.message]),"\n            ",t("footer",{class:"message__footer"},[t("button",{attrs:{type:"button"},on:Object(_["a"])({},n)},["确定\n              "])])])])])},methods:{doDestroy:function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)}}}),wt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=new bt({data:function(){return Object(_["a"])({},t,{cb:function(){t.cb&&t.cb(),n.visible=!1}})}});n.$mount(),e.appendChild(n.$el),n.visible=!0},kt=(n("df54"),{name:"Snake",render:function(){var t=this,e=arguments[0];return e("main",{class:"snake"},[e("section",[e("div",{class:"snake__container",ref:"container"},[e("transition",{attrs:{name:"fade"}},[e("div",{class:"snake__mode-wrapper",directives:[{name:"show",value:this.modeVisible}]},[e("div",{class:"snake__mode"},[this.modes.map(function(n){return e("button",{attrs:{type:"button"},on:{click:function(){return t.start(n.name)}}},[n.label])})])])])])]),"\n        ",e("section",{directives:[{name:"show",value:this.showInfo}],class:"snake__info"},[e("div",{class:"form-group"},[e("span",["分数:"]),"\n            ",e("span",[this.score])]),"\n          ",e("div",{class:"form-group"},[e("span",["速度:"]),"\n            ",e("span",[this.speed])])])])},props:{window:{required:!0,type:Object}},data:function(){return{modes:[{name:"common",label:"普通模式"},{name:"level",label:"过关模式"},{name:"dodge",label:"躲避模式"}],mode:null,modeVisible:!0,score:null,speed:null}},computed:{showInfo:function(){return![this.speed,this.score].some(function(t){return!t&&0!==t})}},methods:{showModes:function(){this.modeVisible=!0},message:function(t,e){return wt({title:"消息提醒",message:t,cb:e},this.$refs.container)},start:function(t){this.modeVisible&&(this.modeVisible=!1,this.mode=t,this.updateMode())},updateMode:function(t,e){switch(this.score=t||0,this.mode){case"common":this.updateCommonMode(t,e);break;case"level":this.updateLevelMode(t,e);break;case"dodge":this.updateDodgeMode(t,e);break;default:break}},updateCommonMode:function(t,e){var n=this.$_snake;if(t){var i=1+2*Math.floor(t/3);this.speed=i}else n.prepareStart(),this.speed=1},updateLevelMode:function(){for(var t=[],e=0,n=0;n<5;n++)t.push({score:5*(n+1),speed:1+5*n});return function(n,i){var o=this,r=t[e],a=this.$_snake,s=function(){a.prepareStart(),o.speed=t[0].speed};n?n>=r.score&&(a.disable(),e>=t.length-1?this.message("厉害啊大兄弟，通关啦！",function(){o.showModes(),e=0}):this.message("下一关啦！",function(){var n=t[e+1];a.prepareStart(),o.speed=n.speed,e++})):s()}}(),updateDodgeMode:function(){for(var t=0,e=[],n=0;n<5;n++)e.push({score:5*(n+1),speed:1+5*n,walls:10*(n+1)});return function(n){var i=this,o=this.$_snake,r=function(){o.prepareStart(),i.speed=e[0].speed,o.fillWall(e[0].walls),o.draw()};if(n){var a=e[t];n>=a.score&&(o.disable(),t>=e.length-1?this.message("牛逼啊大兄弟，通关啦！",function(){i.showModes(),t=0}):this.message("下一关啦！",function(){var n=e[t+1];o.prepareStart(),i.speed=n.speed,o.fillWall(n.walls),o.draw(),t++}))}else r()}}(),sendEndMessage:function(t){var e=this,n=t.message;this.message(n,function(){e.showModes()})}},mounted:function(){var t=this.window,e=t.width>767?600:Math.min(t.width,t.height);this.$_snake=new yt(this.$refs.container,{scoreCallback:this.updateMode,endCallback:this.sendEndMessage,width:e,height:e})},beforeDestroy:function(){this.$_snake.destroy()},watch:{speed:function(t){var e=this.$_snake;e&&e.speed!==t&&(e.speed=t)}}});i["a"].use(b["a"]);var xt=function(t){return t.charAt(0).toLowerCase()+t.slice(1).replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},Ct=[{name:"Clock",component:L},{name:"ColorPicker",component:J},{name:"Cropper",component:dt},{name:"InfiniteScroll",component:vt},{name:"Snake",component:kt}],Mt=new b["a"]({mode:"hash",base:"/dist/",routes:[{path:"/",redirect:{name:"Clock"}}].concat(Object(y["a"])(Ct.map(function(t){return Object(_["a"])({path:"/"+xt(t.name)},t)})),[{path:"*",name:"NotFound",component:w}])}),St=Mt;i["a"].config.productionTip=!1,new i["a"]({el:"#app",router:St,render:function(t){return t(g)}})},ce93:function(t,e,n){},d2d2:function(t,e,n){},df54:function(t,e,n){},f24f:function(t,e,n){}});
//# sourceMappingURL=app.286b44ad.js.map