(function(t){function e(e){for(var n,s,a=e[0],h=e[1],c=e[2],l=0,d=[];l<a.length;l++)s=a[l],o[s]&&d.push(o[s][0]),o[s]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,a=1;a<i.length;a++){var h=i[a];0!==o[h]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},o={app:0},r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/dist/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],h=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=h;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"233c":function(t,e,i){},4189:function(t,e,i){},6175:function(t,e,i){t.exports=i.p+"img/default.745351e1.jpg"},"7d57":function(t,e,i){},"9a32":function(t,e,i){},b20f:function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d"),i("b20f");var n=i("2b0e"),o=(i("7f7f"),i("5176")),r=i.n(o),s=i("d225"),a=i("b0b4");i("9a32");function h(t){var e=[],i=window.innerWidth,n=window.innerHeight,o=.04*i,r=.06*n,s=.01*i,a=.01*i,h=function(t,e){var i=t.el,o=e.el,h=e.top+o.offsetHeight+s;h+i.offsetHeight>n?t.setPosition(r,e.right+o.offsetWidth+a):t.setPosition(h,e.right)};return function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.delay,s=new c(i);e.length>0?h(s,e[e.length-1]):s.setPosition(r,o),e.push(s),s.show(),setTimeout(function(){if(s.hide(),e.splice(0,1),e.length>0&&(e[0].setPosition(r,o),e.length>1))for(var t=1,i=e.length;t<i;t++)h(e[t],e[t-1])},n)}}for(var c=function(){function t(e){var i=this;Object(s["a"])(this,t),this.show=function(){i._el.classList.add("show")},this.hide=function(){i._el.classList.remove("show"),i._el.classList.add("hide"),setTimeout(function(){document.body.removeChild(i._el)},300)},this._message=e,this.init()}return Object(a["a"])(t,[{key:"init",value:function(){var t=document.createElement("div");t.classList.add("toast"),t.innerHTML=this._message,document.body.appendChild(t),this._el=t}},{key:"setPosition",value:function(t,e){var i=this.el;this.top=t,this.right=e,r()(i.style,{top:t+"px",right:e+"px"})}},{key:"el",get:function(){return this._el}}]),t}(),u=h({delay:5e3}),l=function(t,e){var i=null;return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];i&&clearTimeout(i),i=setTimeout(function(){t.apply(void 0,o)},e)}},d=!!window.localStorage,f="DING_MENU_VISIBLE",p=function(){if(!d)return!0;var t=localStorage.getItem(f);try{return JSON.parse(t)}catch(e){return!0}},v=function(t){d&&localStorage.setItem(f,t)},m=(i("233c"),function(){return{width:window.innerWidth,height:window.innerHeight}}),g={name:"App",data:function(){return{menus:[{label:"动画时钟",name:"Clock"},{label:"颜色选择器",name:"ColorPicker"},{label:"图片裁剪器",name:"Cropper"},{label:"无限滚动列表",name:"InfiniteScroll"},{label:"贪食蛇",name:"Snake"}],menusVisible:p(),window:m(),contentOffsetTop:0}},computed:{isMobile:function(){return this.window.width<768},shouldMenuVisible:function(){return!this.isMobile||this.menusVisible}},render:function(){var t=arguments[0];return t("div",{attrs:{id:"app"},class:"app"},[t("header",{class:"app__header"},[t("h1",{class:"app__logo"},[t("a",{attrs:{href:"https://dingyuchao.me"}},["ding-js"])]),t("nav",{class:"app__nav",directives:[{name:"show",value:this.shouldMenuVisible}]},[this.menus.map(function(e){return t("router-link",{key:e.name,attrs:{to:{name:e.name},tag:"li"}},[t("a",[e.label])])}),t("li",[t("a",{attrs:{href:"https://github.com/ding-js/ife/tree/master/src/containers/".concat(this.$route.name),target:"_blank"}},["查看源码"])])]),this.isMobile?t("div",[t("svg",{on:{click:this.expandToggle},attrs:{fill:"#666",height:"36",width:"36",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},class:{"app__nav-btn":!0,"app__nav-btn--expand":this.shouldMenuVisible}},[t("path",{attrs:{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}}),t("path",{attrs:{d:"M0-.75h24v24H0z",fill:"none"}})])]):null]),t("div",{class:"app__body"},[t("div",{class:"content",ref:"content",style:{minHeight:"".concat(this.window.height-this.contentOffsetTop-24,"px")}},[t("router-view",{attrs:{window:this.window}})])])])},mounted:function(){var t=this;this.$_handleResize=l(function(){t.window=m(),t.updateContentOffsetHeight()},100),this.updateContentOffsetHeight(),window.addEventListener("resize",this.$_handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.$_handleResize)},methods:{expandToggle:function(){this.menusVisible=!this.menusVisible},updateContentOffsetHeight:function(){var t=this.$refs.content;t&&(this.contentOffsetTop=t.offsetTop)}},watch:{menusVisible:function(t){var e=this;v(t),this.$nextTick(function(){e.updateContentOffsetHeight()})}}},_=i("cebc"),y=i("75fc"),b=(i("a481"),i("8c4f")),w={name:"NotFound",render:function(){var t=arguments[0];return t("p",["404 Not Found."])}},k=i("bfb3"),x=i.n(k),C=(i("c5f6"),i("55dd"),i("14b9"),i("768b")),M=(i("ac6a"),i("6b54"),i("6c7b"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&t.tagName){var n,o=["width","height"].map(function(n){return"number"===typeof e[n]?e[n]:+t.getAttribute(n)||i[n]||+t["offset"+n.charAt(0).toUpperCase()+n.slice(1)]||0}),r=Object(C["a"])(o,2),s=r[0],a=r[1];return"CANVAS"===t.tagName?n=t:(n=document.createElement("canvas"),t.appendChild(n)),n.setAttribute("width",s),n.setAttribute("height",a),{canvas:n,width:s,height:a}}console.warn("Invaid element")}),S=function(){function t(e,i){var n=this;Object(s["a"])(this,t),this._offset=0,this._alarms=[],this.draw=function(){var t=n.getCurrentTime(),e=n._ctx,i=n._options,o=i.width,r=i.height,s=i.color,a=i.radius,h={x:o/2,y:r/2},c=.08*a,u=a-c/2;e.clearRect(0,0,o,r),e.save(),e.strokeStyle=s,e.lineWidth=c,e.beginPath(),e.arc(h.x,h.y,u,0,2*Math.PI),e.stroke(),e.restore(),e.save();var l=c+.02*a,d=60;e.fillStyle=s,e.translate(a,a);for(var f=0;f<d;f++){var p=f%5===0?a/35:a/70,v=.1*a,m=-p/2,g=l-a;e.beginPath(),e.rect(m,g,p,v),e.fill(),e.rotate(2*Math.PI/d)}e.restore(),e.save();var _=a-.31*a,y=.18*a;e.fillStyle=s,e.font="".concat(y,"px sans-serif"),e.textAlign="center",e.textBaseline="middle";for(var b=1;b<=12;b++){var w=2*Math.PI*b/12,k=n.getCoordinate(_,w),x=k.x,C=k.y;e.fillText(b.toString(),x,C)}e.font="".concat(.6*y,"px sans-serif"),e.fillText("".concat(t.hour<12?"A.M":"P.M"),h.x,.3*r),e.restore(),e.save();var M=[{topY:-.72,bottomY:.24,degree:t.secondDegree,bottomWidth:.02,topWidth:.01},{topY:-.6,bottomY:.18,degree:t.minuteDegree,bottomWidth:.06,topWidth:.03},{topY:-.4,bottomY:.13,degree:t.hourDegree,bottomWidth:.045,topWidth:.02}],S=Math.tan(2*Math.PI*60/360),O=Math.tan(2*Math.PI*30/360);e.fillStyle=s,M.forEach(function(t){var i=a*t.bottomY,n=a*t.bottomWidth/2,o=n/S,r=a*t.topY,s=a*t.topWidth/2,h=s/O;e.translate(a,a),e.rotate(t.degree),e.beginPath(),e.moveTo(0,i),e.lineTo(-n,i-o),e.lineTo(-s,r+h),e.lineTo(0,r),e.lineTo(s,r+h),e.lineTo(n,i-o),e.lineTo(0,i),e.fill(),e.setTransform(1,0,0,1,0,0)}),e.restore(),e.save(),e.fillStyle="#ffffff",e.beginPath(),e.arc(h.x,h.y,.02*a,0,2*Math.PI),e.fill(),e.restore(),n.checkAlarms(t.date),n._requestId=window.requestAnimationFrame(n.draw)};var o={color:"#9b9b9b"},a=M(e,i,{width:300,height:300}),h=a.canvas;this._canvas=h,this._ctx=h.getContext("2d"),r()(o,i,{width:a.width,height:a.height});var c=Math.min(o.width,o.height)/2;(!o.radius||o.radius>c||o.radius<=1)&&(o.radius=c),this._options=o,this.draw()}return Object(a["a"])(t,[{key:"getCoordinate",value:function(t,e){var i=this._options.radius;return{x:i+t*Math.sin(e),y:i-t*Math.cos(e)}}},{key:"getCurrentTime",value:function(){var t=new Date,e="number"===typeof this._offset?new Date(t.getTime()+this._offset):t,i=[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],n=i[0],o=i[1],r=i[2],s=i[3],a=r+s/1e3,h=o+a/60,c=n+h/60,u=[c/12,h/60,a/60].map(function(t){return 2*t*Math.PI}),l=Object(C["a"])(u,3),d=l[0],f=l[1],p=l[2];return{date:e,hourDegree:d,minuteDegree:f,secondDegree:p,hour:n,minute:o,second:r}}},{key:"checkAlarms",value:function(t){var e=this._alarms;if(e&&e.length)for(var i=0;i<e.length;i++){var n=e[i];Math.abs(t.getTime()-n.time.getTime())<500&&(n.repeat||(this._alarms.splice(i,i+1),i--),n.cb())}}},{key:"addAlarm",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._alarms||(this._alarms=[]),this._alarms.push({time:t,cb:e,repeat:i})}},{key:"clearAlarms",value:function(){this._alarms=[]}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._requestId&&window.cancelAnimationFrame(this._requestId),t&&this._canvas&&this._canvas.parentNode.removeChild(this._canvas)}},{key:"offset",set:function(t){this._offset=t},get:function(){return this._offset}},{key:"alarms",get:function(){return this._alarms}}]),t}(),O=(i("7d57"),function(){var t=new Date;return{hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds(),offset:60*-(new Date).getTimezoneOffset()*1e3}}),E=[{name:"hours",label:"小时",max:23},{name:"minutes",label:"分钟",max:59},{name:"seconds",label:"秒",max:59}],D=[],T=-12;T<=12;T++){var j="UTC";T>0?j+="+".concat(T):T<0&&(j+=T),D.push({name:j,offset:60*T*60*1e3})}D.sort(function(t,e){return e.offset-t.offset});var P,L={name:"Clock",data:function(){return{time:O(),alarms:[]}},render:function(){var t=this,e=arguments[0];return e("div",{class:"clock"},[e("section",[e("canvas",{ref:"canvas"})]),e("section",[e("form",{class:"clock__time-from",on:{submit:function(e){e.preventDefault(),t.setTime()}}},[E.map(function(i){return e("div",{class:"form-group"},[e("label",{attrs:{for:i.name}},[i.label,"："]),e("input",{attrs:{type:"number",max:i.max,min:"0",step:"1"},domProps:{value:t.time[i.name]},on:{input:function(e){t.updateInput(e,i)}}})])}),e("div",{class:"form-group"},[e("label",{attrs:{for:"offset"}},["时区："]),e("select",{domProps:{value:this.time.offset},on:{change:this.updateZone}},[D.map(function(t){return e("option",{key:t.name,domProps:{value:t.offset}},[t.name])})])])])]),e("section",[e("div",{class:"clock__btns"},[e("button",{attrs:{type:"button"},on:{click:this.setTime}},["设置时间"]),e("button",{attrs:{type:"button"},on:{click:this.addAlarm}},["设置闹钟"]),e("button",{attrs:{type:"button"},on:{click:this.clearAlarms}},["清除闹钟"]),e("button",{attrs:{type:"button"},on:{click:this.resetClock}},["还原时钟"])])]),e("section",[e("div",{class:"clock__alarms"},[!this.alarms||this.alarms.length<1?e("p",["暂无闹钟"]):this.alarms.map(function(t,i){return e("p",{key:i},["闹铃时间：",t.time.toLocaleString()])})])])])},methods:{updateInput:function(t,e){var i=Number(t.target.value),n=i;(x()(i)||i<0)&&(n=0),n>e.max&&(n=e.max),this.time[e.name]=n},updateZone:function(t){var e=Number(t.target.value),i=this.getTimezoneOffsetMilliSeconds(e);this.time.offset=e,this.$_clock.offset=i},getTimezoneOffsetMilliSeconds:function(t){return t+60*(new Date).getTimezoneOffset()*1e3},setTime:function(){var t=this.$_clock,e=new Date,i=this.getFormTime(),n=i.getTime()-e.getTime()+this.getTimezoneOffsetMilliSeconds(this.time.offset);t.offset=n},addAlarm:function(){var t=this.$_clock,e=this.getFormTime();t.addAlarm(e,this.triggerAlarm,!1),this.alarms=t.alarms},clearAlarms:function(){var t=this.$_clock;t.clearAlarms(),this.alarms=[]},getFormTime:function(){var t=new Date,e=[t.getFullYear(),t.getMonth(),t.getDate()],i=e[0],n=e[1],o=e[2],r=this.time,s=r.hours,a=r.minutes,h=r.seconds,c=new Date(i,n,o,s,a,h);return c},triggerAlarm:function(){var t=this.$_clock;this.alarms=t.alarms,u("闹钟响啦...")},resetClock:function(){var t=this.$_clock;r()(this.time,O()),t.offset=0}},mounted:function(){this.$_clock=new S(this.$refs.canvas)},beforeDestroy:function(){this.$_clock&&this.$_clock.destroy()}},I=i("e814"),$=i.n(I),H=i("5d73"),R=i.n(H),W=i("7618"),A=i("2d7d"),z=i.n(A),B=new z.a,V=0,N=function(t,e){if(e.touches){var i=t.getBoundingClientRect(),n=e.touches[0];return{x:n.clientX-i.left,y:n.clientY-i.top}}return{x:e.offsetX,y:e.offsetY}},G=function(t,e){var i={};switch(Object(W["a"])(e)){case"function":i.onMove=e;break;case"object":r()(i,e);break;default:break}var n={last:null,move:function(e){if(e.target===t){var o=N(t,e);n.last=o,i.onMove&&i.onMove(o)}},start:function(e){e.preventDefault(),e.target===t&&(i.onStart&&i.onStart(N(t,e)),document.addEventListener("mousemove",n.move),document.addEventListener("touchmove",n.move))},end:function(){i.onEnd&&i.onEnd(n.last),document.removeEventListener("mousemove",n.move),document.removeEventListener("touchmove",n.move)},bind:function(){t.addEventListener("mousedown",n.start),t.addEventListener("touchstart",n.start),document.addEventListener("mouseup",n.end),document.addEventListener("touchend",n.end)},unbind:function(){n.end(),t.removeEventListener("mousedown",n.start),t.removeEventListener("touchstart",n.start),document.removeEventListener("mouseup",n.end),document.removeEventListener("touchend",n.end)}};return n.bind(),V++,B.set(V,n),V},Y=function(t){var e=B.get(t);e&&(e.unbind(),B.delete(t))},F=i("bb15"),X=function(){function t(e,i){Object(s["a"])(this,t);var n={lineWidth:1,padding:10};M(e,i);i&&r()(n,i),this._options=n,this._canvas=e,this.init()}return Object(a["a"])(t,[{key:"init",value:function(){var t=this,e=this._canvas,i=e.getContext("2d"),n=this._options,o=n.width,r=n.height,s=n.lineWidth,a=n.padding,h=o-2*a,c=r-2*a;i.lineWidth=s,this._ctx=i,this._contentWidth=h,this._contentHeight=c,this.initBackground(),this._id=G(e,function(e){var i=e.x,n=e.y;t.setCoordinate(i,n)})}},{key:"initBackground",value:function(){var t=this._ctx,e=(this._color,this._options),i=e.padding,n=e.width,o=e.height,r=t.createLinearGradient(n/2,o-i,n/2,i),s=t.createLinearGradient(i,o/2,n-i,o/2);s.addColorStop(0,"#fff"),s.addColorStop(1,"rgba(0,0,0,0)"),r.addColorStop(0,"#000"),r.addColorStop(1,"rgba(0,0,0,0)"),this._whiteGradient=s,this._blackGradient=r}},{key:"fillColor",value:function(){var t=this._ctx,e=this._contentWidth,i=this._contentHeight,n=this._hue,o=this._options.padding;n&&(t.save(),t.fillStyle=n,t.fillRect(o,o,e,i),t.restore(),[this._whiteGradient,this._blackGradient].forEach(function(n){t.fillStyle=n,t.fillRect(o,o,e,i),t.restore()}))}},{key:"setCoordinate",value:function(t,e){var i,n,o=this._options.padding,r=this._contentHeight,s=this._contentWidth;if(i=t<o?o:t>s+o?s+o:t,n=e<o?o:e>r+o?r+o:e,this._x=i,this._y=n,this._options.onColorChange){var a={h:this.color.h,s:(i-o)/s,v:1-(n-o)/r};this._color=a,this._options.onColorChange(a)}this.draw()}},{key:"renderPointer",value:function(){var t=this._options.padding,e=this._x,i=this._y;if(void 0!==e&&void 0!==i){var n=this._ctx;n.save(),n.strokeStyle="#000",n.beginPath(),n.arc(e,i,t/2,0,2*Math.PI),n.stroke(),n.restore(),n.strokeStyle="#fff",n.beginPath(),n.arc(e,i,t/2-this._options.lineWidth,0,2*Math.PI),n.stroke(),n.restore()}}},{key:"updateHue",value:function(){var t=this._color&&this._color.h;if("number"===typeof t){var e=F["hsv"].rgb(t,100,100),i=Object(C["a"])(e,3),n=i[0],o=i[1],r=i[2];this._hue="rgb(".concat(n,",").concat(o,",").concat(r,")")}}},{key:"updateCoordinate",value:function(){var t=this._contentWidth,e=this._contentHeight,i=this._options;this._x=this._color.s*t+i.padding,this._y=(1-this.color.v)*e+i.padding}},{key:"draw",value:function(){var t=this._ctx,e=(this._x,this._y,this._options),i=e.width,n=e.height;t.clearRect(0,0,i,n),this.fillColor(),this.renderPointer()}},{key:"destroy",value:function(t){Y(this._id),t&&this._canvas.parentNode.removeChild(this._canvas)}},{key:"color",set:function(t){var e=this,i=["h","s","v"],n=r()({},this._color,t),o={h:n.h,s:n.s,v:n.v};this._color&&i.every(function(t){return o[t]===e._color[t]})||(this._color=o,this.updateHue(),this.updateCoordinate(),this.draw())},get:function(){return this._color}}]),t}(),U=function(){function t(e,i){Object(s["a"])(this,t);var n={lineWidth:1,padding:10};M(e,i);i&&r()(n,i),this._options=n,this._canvas=e,this.init()}return Object(a["a"])(t,[{key:"init",value:function(){for(var t=this,e=this._options,i=e.padding,n=e.width,o=e.height,r=this._canvas,s=r.getContext("2d"),a=s.createLinearGradient(i,i,i,o-2*i),h=0;h<=6;h++){var c=h/6,u=F["hsv"].rgb(360*c,100,100),l=Object(C["a"])(u,3),d=l[0],f=l[1],p=l[2];a.addColorStop(h/6,"rgb(".concat(d,",").concat(f,",").concat(p,")"))}this._contentWidth=n-2*i,this._contentHeight=o-2*i,this._gradient=a,this._ctx=s,s.lineWidth=this._options.lineWidth,this._id=G(r,function(e){t.setCoordinate(e.y)})}},{key:"fillBackground",value:function(){var t=this._gradient,e=this._ctx,i=this._options,n=i.padding;i.width,i.height;e.fillStyle=t,e.fillRect(n,n,this._contentWidth,this._contentHeight)}},{key:"setCoordinate",value:function(t){var e,i=this._options,n=i.padding,o=i.height;if(e=t<n?n:t>o-n?o-n:t,this._y!==e){if(this._y=e,this._options.onColorChange){var r=(e-n)/this._contentHeight,s=Math.floor(360*r),a={h:s};this._color=a,this._options.onColorChange(a)}this.draw()}}},{key:"renderSlider",value:function(){if("number"===typeof this._y){var t=this._options,e=t.padding,i=t.width,n=(t.height,t.lineWidth),o=this._y,r=i,s=e/2,a=this._ctx;a.save(),a.strokeStyle="#000",a.strokeRect(0,o-s/2,r,s),a.strokeStyle="#fff",a.strokeRect(n,o-s/2+n,r-2*n,s-2*n),a.stroke(),a.restore()}}},{key:"draw",value:function(){var t=this._options,e=t.width,i=t.height;this._ctx.clearRect(0,0,e,i),this.fillBackground(),this.renderSlider()}},{key:"destroy",value:function(t){Y(this._id),t&&this._canvas.parentNode.removeChild(this._canvas)}},{key:"color",set:function(t){if(!this._color||t.h!==this._color.h){var e=this._options.padding,i=t.h/360,n=this._contentHeight*i+e;this.setCoordinate(n)}},get:function(){return this._color}}]),t}(),q=function(){function t(e,i){Object(s["a"])(this,t);var n={height:300,blockWidth:300,barWidth:40,padding:10};r()(n,i),this._options=n,this._container=e,this.init()}return Object(a["a"])(t,[{key:"init",value:function(){var t=this,e=this._options,i=(e.padding,e.height),n=e.blockWidth,o=e.barWidth,r=(e.onColorChange,document.createElement("canvas")),s=document.createElement("canvas"),a={width:n,height:i,onColorChange:function(e){var i=e.s,n=e.v;t.setHSV({s:i,v:n})}},h={width:o,height:i,onColorChange:function(e){var i=e.h;t.setHSV({h:i})}};this._container.appendChild(r),this._container.appendChild(s),this._block=new X(r,a),this._bar=new U(s,h),this.setHSV({h:0,s:.5,v:.5})}},{key:"handleColorChange",value:function(t){if("number"===typeof t.h&&(this._bar.color=t),"number"===typeof t.s&&"number"===typeof t.v&&(this._block.color=t),this._options.onColorChange){var e=t.h,i=100*t.s,n=100*t.v,o=F["hsv"].rgb(e,i,n),r=F["rgb"].hsl(o).map(function(t){return t/100}),s=F["rgb"].hex(o);this._options.onColorChange({hex:s,h:r[0],s:r[1],l:r[2],r:o[0],g:o[1],b:o[2]})}}},{key:"setHSV",value:function(t){var e=this;if(this._bar&&this._block){t=r()({},this._color,t);var i=["h","s","v"];this._color&&i.every(function(i){return t[i]===e._color[i]})||(this._color=t,this.handleColorChange(t))}}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._block.destroy(t),this._bar.destroy(t)}},{key:"color",set:function(t){var e,i=["r","g","b"],n=["h","s","l"];if(i.every(function(e){return"number"===typeof t[e]}))e=F["rgb"].hsv(t.r,t.g,t.b);else if(n.every(function(e){return"number"===typeof t[e]}))e=F["hsl"].hsv(100*t.h,100*t.s,100*t.l);else{if(!t.hex)return;e=F["rgb"].hsv(F["hex"].rgb(t.hex))}this.setHSV({h:e[0],s:e[1]/100,v:e[2]/100})}}]),t}(),J=(i("d2d2"),{name:"ColorPicker",data:function(){return{color:{r:null,g:null,b:null,h:null,s:null,l:null,hex:""}}},render:function(){var t=this,e=arguments[0];return e("div",{class:"color-picker"},[e("section",{class:"picker-wrapper"},[e("div",{attrs:{id:"picker"},ref:"picker"})]),e("section",[e("form",{on:{submit:function(t){t.preventDefault()}}},[e("div",{class:"row"},[["r","g","b"].map(function(i){return e("div",{class:"form-group"},[e("label",{attrs:{for:i}},[i.toUpperCase(),":"]),e("input",{attrs:{type:"number",max:"255",min:"0",step:"1"},domProps:{value:t.color[i]},on:{input:function(e){return t.updateInput(e,i)}}})])})]),e("div",{class:"row"},[["h","s","l"].map(function(i){return e("div",{class:"form-group"},[e("label",{attrs:{for:i}},[i.toUpperCase(),":"]),e("input",{attrs:{type:"number",max:"1",min:"0",step:"0.05"},domProps:{value:t.color[i]},on:{input:function(e){return t.updateInput(e,i)}}})])})]),e("div",{class:"row"},[e("div",{class:"form-group"},[e("label",{attrs:{for:"hex"}},["#"]),e("input",{domProps:{value:this.color.hex.toUpperCase()},attrs:{type:"text"},on:{input:this.updateColorByHEX}})])])])]),e("section",[e("div",{class:"color-picker__preview",style:{backgroundColor:"#"+this.color.hex}})])])},methods:{updateInput:function(t,e){var i=t.target,n=Number(i.value),o=Number(i.getAttribute("max")),s=Number(i.getAttribute("min")),a=n;x()(n)&&(a=s),a>o&&(a=o),a<s&&(a=s);var h=r()({},this.color);switch(h[e]=a,e){case"r":case"g":case"b":this.updateColorByRGB(h);break;case"h":case"s":case"l":this.updateColorByHSL(h);break;default:break}},updateColorByRGB:function(t){var e=t.r,i=t.g,n=t.b;[e,i,n].some(function(t){return"number"!==typeof t})||(this.$_picker.color={r:e,g:i,b:n})},updateColorByHSL:function(t){var e=t.h,i=t.s,n=t.l;[e,i,n].some(function(t){return"number"!==typeof t})||(this.$_picker.color={h:e,s:i,l:n})},updateColorByHEX:function(t){var e=t.target.value;if(6===e.length){var i=!0,n=!1,o=void 0;try{for(var r,s=R()(e);!(i=(r=s.next()).done);i=!0){var a=r.value,h=$()(a,16);if(x()(h)||h>15)return}}catch(c){n=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}this.$_picker.color={hex:e}}}},mounted:function(){var t=this;this.$_picker=new q(this.$refs.picker,{onColorChange:function(e){r()(t.color,e)}})},beforeDestroy:function(){this.$_picker&&this.$_picker.destroy()}}),K=(i("96cf"),i("3b8d")),Z=(i("4917"),i("a4bb")),Q=i.n(Z),tt=i("795b"),et=i.n(tt),it=i("a745"),nt=i.n(it),ot=i("bd86");(function(t){t[t["cropper"]=0]="cropper",t[t["image"]=1]="image",t[t["pointRD"]=2]="pointRD",t[t["background"]=3]="background"})(P||(P={}));var rt=function(){function t(e,i){var n,o=this;Object(s["a"])(this,t),this._scale=1,this.handleStart=function(t){o._startPoint=o.getPointByCoordinate(t.x,t.y)},this.handleMove=function(t){var e=o._types[o._startPoint.type];e&&e.handler&&e.handler(t)},this.handleMouseWheel=function(t){t.preventDefault();var e=o._image;if(e){var i,n=e.clientWidth,r=e.clientHeight,s=o._scale,a=t.deltaY/800;i=a>0?1/(1+a):1+Math.abs(a),i*=s,o._scale=i,n*=i,r*=i,e.x+=(e.width-n)/2,e.y+=(e.height-r)/2,e.width=n,e.height=r,o.draw()}},this.handleImageMove=function(t){var e=t.x,i=t.y,n=o._startPoint;o._image.x=e-n.offsetX,o._image.y=i-n.offsetY,o.draw()},this.handleCropperMove=function(t){var e=t.x,i=t.y,n=o._options,r=n.width,s=n.height,a=o._startPoint,h=a.offsetX,c=a.offsetY,u=r-o._cropper.width,l=s-o._cropper.height,d=e-h,f=i-c;d<0&&(d=0),d>u&&(d=u),f<0&&(f=0),f>l&&(f=l),o.cropper={x:d,y:f}},this.handlePointMove=function(t){var e=t.x,i=t.y,n=(o._startPoint,e-o._cropper.x),r=i-o._cropper.y;n<=0||r<=0||(o.cropper={width:n,height:r})};var a=M(e,i,{width:700,height:450}),h=r()({},i,{width:a.width,height:a.height});this._canvas=a.canvas,this._ctx=a.canvas.getContext("2d"),this._options=h,this._types=(n={},Object(ot["a"])(n,P.cropper,{cursor:"all-scroll",handler:this.handleCropperMove}),Object(ot["a"])(n,P.image,{cursor:"default",handler:this.handleImageMove}),Object(ot["a"])(n,P.pointRD,{cursor:"nwse-resize",handler:this.handlePointMove}),Object(ot["a"])(n,P.background,{cursor:"default"}),n),this.init()}return Object(a["a"])(t,[{key:"init",value:function(){var t=this._options,e=this._canvas,i=t.width/3,n=t.height/3;this._cropperCanvas=document.createElement("canvas"),this._cropperCtx=this._cropperCanvas.getContext("2d"),this.cropper={width:i,height:n,x:(t.width-i)/2,y:(t.height-n)/2},t.preview&&(this._previewList=(nt()(t.preview)?t.preview:[t.preview]).map(function(t){var e=document.createElement("canvas");return t.container.appendChild(e),Object(_["a"])({},t,{canvas:e,ctx:e.getContext("2d")})})),e.addEventListener("mousewheel",this.handleMouseWheel),this._id=G(e,{onStart:this.handleStart,onMove:this.handleMove})}},{key:"getPointByCoordinate",value:function(t,e){var i=this._point,n=this._cropper,o=this._image,r={x:t,y:e};return i&&t>i.x&&t<i.x+i.width&&e>i.y&&e<i.y+i.height?r.type=P.pointRD:n&&t>n.x&&t<n.x+n.width&&e>n.y&&e<n.y+n.height?(r.offsetX=t-n.x,r.offsetY=e-n.y,r.type=P.cropper):o&&t>o.x&&t<o.x+o.width&&e>o.y&&e<o.y+o.height?(r.offsetX=t-o.x,r.offsetY=e-o.y,r.type=P.image):r.type=P.background,r}},{key:"updatePoint",value:function(){var t=this._cropper,e=8,i=8;this._point={width:e,height:i,x:t.x+t.width-e/2,y:t.y+t.height-i/2}}},{key:"fillBackground",value:function(){var t=this._options,e=t.width,i=t.height,n=this._ctx,o=e/40,r=Math.ceil(e/o),s=Math.ceil(i/o);n.save(),n.fillStyle="#ccc";for(var a=0,h=0;h<s;h++)for(var c=0;c<r;c++)(a+h)%2===0&&n.fillRect(c*o,h*o,o,o),a++;n.fillStyle="rgba(0,0,0,0.1)",n.fillRect(0,0,e,i),n.restore()}},{key:"fillImage",value:function(){var t=this._ctx,e=this._image;e&&t.drawImage(e.element,e.x,e.y,e.width,e.height)}},{key:"fillCropper",value:function(){var t=this._ctx,e=this._cropper,i=this._point;t.save(),t.strokeStyle="#39f",t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#39f",t.fillRect(i.x,i.y,i.width,i.height),t.restore()}},{key:"draw",value:function(){var t=this._options,e=t.width,i=t.height;this._ctx.clearRect(0,0,e,i),this.fillBackground(),this.fillImage(),this.fillCropper(),this.preview()}},{key:"updateImage",value:function(t){if(t.src){var e=this._options,i=e.width,n=e.height,o=t.width,r=t.height,s=o,a=r,h=1;o>i&&(s=i,h=s/o,a=h*r),a>n&&(a=n,h=a/r,s=h*o),this._image={element:t,width:s,height:a,x:(i-s)/2,y:(n-a)/2,clientWidth:o,clientHeight:r},this._scale=h,this.draw()}}},{key:"preview",value:function(){if(this._previewList&&this._image){this._scale;var t=this._image,e=this._cropper;this._options;this._previewList.forEach(function(i){var n=e.width*i.zoom,o=e.height*i.zoom;i.canvas.width=n,i.canvas.height=o,i.ctx.clearRect(0,0,n,o),i.ctx.drawImage(t.element,(t.x-e.x)*i.zoom,(t.y-e.y)*i.zoom,t.width*i.zoom,t.height*i.zoom)})}}},{key:"crop",value:function(){var e=this;return new et.a(function(i,n){var o=e._options,s=o.width,a=o.height,h=e._image,c=e._cropper,u=e._cropperCtx;h.element||n({code:1001,message:t.Messages["1001"]}),r()(e._cropperCanvas,{width:c.width,height:c.height}),u.clearRect(0,0,s,a),u.drawImage(h.element,h.x-c.x,h.y-c.y,h.width,h.height);var l=e._cropperCanvas.toDataURL();i(l)})}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=function(t){return t.parentNode.removeChild(t)};Y(this._id),window.removeEventListener("mousewheel",this.handleMouseWheel),t&&(e(this._canvas),this._previewList&&this._previewList.forEach(function(t){e(t.canvas)}))}},{key:"image",set:function(t){var e=this;if(t instanceof HTMLImageElement)this.updateImage(t);else{if(!(t instanceof File))return;if(!t.type.match(/^image\/.+$/))return void u("请选择正确的图片文件");var i=new FileReader;i.onload=function(t){var i=new Image;i.src=t.target.result,i.onload=function(){e.updateImage(i)}},i.readAsDataURL(t)}},get:function(){return this._image.element}},{key:"cropper",set:function(t){var e=this;this._cropper||(this._cropper={});var i=!1;Q()(t).forEach(function(n){var o=Math.round(t[n]);e._cropper[n]!==o&&(e._cropper[n]=o,i=!0)}),i&&(this.updatePoint(),this._options.onCropperChange&&this._options.onCropperChange(this._cropper),this.draw())},get:function(){return this._cropper}}]),t}();rt.Messages={1001:"没有图片"};var st,at,ht,ct=i("6175"),ut=(i("4189"),document.createElement("a")),lt=0,dt={name:"Cropper",props:{window:{required:!0,type:Object}},data:function(){return{cropperOptions:{width:200,height:200,x:0,y:0},pickText:"点击选择要裁剪的图片",preview:[.6,.9,1.2]}},render:function(t){var e=this;return t("div",{class:"cropper"},[t("section",[t("form",[t("div",{class:"form-group"},[t("input",{attrs:{placeholder:"宽",type:"number",min:"0",max:this.containerSize.width,name:"width"},domProps:{value:this.cropperOptions.width},on:{input:function(t){e.updateSize(t,"width")}}}),t("input",{attrs:{placeholder:"高",type:"number",min:"0",max:this.containerSize.height,name:"height"},domProps:{value:this.cropperOptions.height},on:{input:function(t){e.updateSize(t,"height")}}})]),t("div",{class:"form-group"},[t("button",{attrs:{type:"button"},on:{click:this.setCropper}},["修改大小"]),t("button",{attrs:{type:"button"},on:{click:this.doCrop}},["裁剪"])]),t("div",{class:"form-group"},[t("label",{attrs:{for:"file",id:"pick-file"},class:"cropper__pick"},[this.pickText]),t("input",{attrs:{type:"file",id:"file",accept:"image/jpeg,image/x-icon,image/png"},on:{change:this.uploadImg}})])])]),t("section",[t("div",{ref:"container",class:"cropper__container"})]),t("section",[this.preview.map(function(e){return t("div",{class:"cropper__preview",ref:"preview-".concat(e)})})])])},computed:{containerSize:function(){var t=this.window,e=t.width,i=t.height;if(e>767)return{width:700,height:450};var n=Math.min(e,i);return{width:n,height:n}}},methods:{updateSize:function(t,e){var i=this.cropperOptions,n=this.containerSize,o=Number(t.target.value),r=o;(x()(o)||o<=0)&&(r=1),o>n[e]&&(r=n[e]),i[e]=r},uploadImg:function(t){var e=t.target;if(e.value&&!(e.files.length<1)){var i=e.files[0];i.type.match(/^image\/.+/)?(this.$_cropper.image=i,this.pickText=i.name):u("请选择正确的图片")}},setCropper:function(){if(this.$_cropper){var t=this.cropperOptions,e=t.width,i=t.height,n=[e,i].some(function(t){return[function(t){return!!t},function(t){return t>0}].some(function(e){return!e(t)})});n?u("请输入正确的宽高!"):this.$_cropper.cropper={width:e,height:i}}},doCrop:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$_cropper.crop();case 3:e=t.sent,ut.href=e,ut.download="dingjs-cropper-".concat(++lt,".png"),ut.click(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),u('不支持HTML5,建议使用<a href="https://www.google.com/chrome/">「Chrome浏览器」浏览本页面!</a>');case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),init:function(){var t=this,e=this.containerSize,i=e.width,n=e.height;this.$_cropper=new rt(this.$refs.container,{preview:this.preview.map(function(e,i){return{zoom:e,container:t.$refs["preview-".concat(e)]}}),width:i,height:n,onCropperChange:function(e){r()(t.cropperOptions,e)}}),this.setDefault()},setDefault:function(){var t=this,e=new Image;e.src=ct,e.onload=function(){t.$_cropper.image=e}}},mounted:function(){this.init()},beforeDestroy:function(){this.$_cropper.destroy()}},ft=function(){function t(e){var i=this;Object(s["a"])(this,t),this.dataset=[],this.more=!0,this.loading=!1,this.scrollEventSource=window,this.debounceCheckdataset=l(function(){return i.checkDataset()},100);for(var n={contentElement:null,scrollElement:document.documentElement,getDataset:null,noDataHtml:"",loadingHtml:"",threshold:400,autoDestroy:!0,render:function(t,e){return"<div>".concat(e,"</div>")}},o=["contentElement","getDataset"],a=0;a<o.length;a++){var h=o[a];if(!e[h])return void console.warn("Option: ".concat(h," can not be empty"))}e.scrollElement&&(this.scrollEventSource=e.scrollElement),r()(n,e),this.op=n,this.init()}return Object(a["a"])(t,[{key:"shouldGetDataset",value:function(){var t=this.op,e=t.scrollElement,i=t.threshold,n=e.scrollHeight-e.scrollTop-e.clientHeight;return!this.dataset.length||!this.loading&&this.more&&n<i}},{key:"checkDataset",value:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.shouldGetDataset()){t.next=4;break}return t.next=3,this.fillMoreDataset();case 3:this.checkDataset();case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"fillMoreDataset",value:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.op.getDataset(this.dataset.length);case 3:e=t.sent,this.loading=!1,e.dataset&&e.dataset.length&&(this.dataset=this.dataset.concat(e.dataset),this.more=e.more,!this.more&&this.op.autoDestroy&&this.destroy(),this.updateView());case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"updateView",value:function(){var t,e=this.op,i=e.render,n=e.contentElement,o=e.noDataHtml,r=e.loadingHtml;t=this.dataset.map(i).join(""),t||this.loading?this.more&&(t+=r):t=o,n.innerHTML=t}},{key:"destroy",value:function(){this.scrollEventSource.removeEventListener("scroll",this.debounceCheckdataset)}},{key:"init",value:function(){this.scrollEventSource.addEventListener("scroll",this.debounceCheckdataset),this.checkDataset(),this.updateView()}}]),t}(),pt=(i("ce93"),new Array(100).fill("").map(function(t,e){return e+1})),vt={name:"InfiniteScroll",render:function(){var t=arguments[0];return t("main",{class:"infinite-scroll"},[t("ul",{ref:"list",class:"infinite-scroll__list"})])},mounted:function(){this.$_infiniteScroll=new ft({contentElement:this.$refs.list,loadingHtml:'\n        <p class="infinite-scroll__loading">\n          <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n            <path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" />\n            <path d="M0 0h24v24H0z" fill="none" />\n          </svg>\n        </p>\n      ',noDataHtml:"<p>Empty</p>",render:function(t){return"<li>".concat(t," list item</li>")},getDataset:function(t){return new et.a(function(e){setTimeout(function(){e({dataset:pt.slice(t,t+20),more:t+20<pt.length})},1e3)})}})}},mt=i("0a0d"),gt=i.n(mt),_t=function(){function t(e){Object(s["a"])(this,t),this._spend=0,this._complete=!1;var i=e.x,n=e.y;this._init={x:i,y:n},this._current={x:i,y:n},this._options=e}return Object(a["a"])(t,[{key:"to",value:function(t,e){return this._next=t,this._time=e,this}},{key:"start",value:function(){return this._prevTime=gt()(),this.update(),this}},{key:"update",value:function(){var t=gt()();if(this._spend=this._spend+(t-this._prevTime),this._spend>=this._time)this._complete=!0;else{this._prevTime=t;var e=this._spend/this._time;this._current={x:this._init.x+(this._next.x-this._init.x)*e,y:this._init.y+(this._next.y-this._init.y)*e},this._options.onUpdate(this._current)}}},{key:"complete",get:function(){return this._complete}}]),t}();(function(t){t[t["empty"]=0]="empty",t[t["wall"]=1]="wall",t[t["body"]=2]="body",t[t["head"]=3]="head",t[t["footer"]=4]="footer",t[t["food"]=5]="food"})(st||(st={})),function(t){t[t["left"]=0]="left",t[t["right"]=1]="right",t[t["up"]=2]="up",t[t["down"]=3]="down"}(at||(at={})),function(t){t[t["beforeStart"]=0]="beforeStart",t[t["end"]=1]="end",t[t["pause"]=2]="pause",t[t["running"]=3]="running",t[t["disabled"]=4]="disabled"}(ht||(ht={}));var yt=function(){function t(e,i){var n,o,a=this;Object(s["a"])(this,t),this._boxes=[],this._speed=1,this._boxTypes=(n={},Object(ot["a"])(n,st.empty,{}),Object(ot["a"])(n,st.wall,{background:"brown"}),Object(ot["a"])(n,st.head,{background:"#555",render:function(t,e,i,n){var o=n/14,r=a._direction[a._snakeDirection],s=n/2,h=[{x:e+s+r.x*o*3+(0===r.x?2.5*o:0),y:i+s+r.y*o*3+(0===r.y?2.5*o:0)},{x:e+s+r.x*o*3+(0===r.x?2.5*-o:0),y:i+s+r.y*o*3+(0===r.y?2.5*-o:0)}];t.fillStyle="#fff",h.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,2*o,0,2*Math.PI),t.fill()})}}),Object(ot["a"])(n,st.body,{render:function(t,e,i,n){t.fillStyle="#888",t.beginPath(),t.arc(e+n/2,i+n/2,n/2,0,2*Math.PI),t.fill()}}),Object(ot["a"])(n,st.footer,{render:function(t,e,i,n){t.fillStyle="#888",t.beginPath(),t.arc(e+n/2,i+n/2,.35*n,0,2*Math.PI),t.fill()}}),Object(ot["a"])(n,st.food,{background:"orange"}),n),this._direction=(o={},Object(ot["a"])(o,at.left,{x:-1,y:0,keyCode:[65,37],opposite:at.right}),Object(ot["a"])(o,at.right,{x:1,y:0,keyCode:[68,39],opposite:at.left}),Object(ot["a"])(o,at.up,{x:0,y:-1,keyCode:[87,38],opposite:at.down}),Object(ot["a"])(o,at.down,{x:0,y:1,keyCode:[83,40],opposite:at.up}),o),this.handleKeyboard=function(t){var e=a._direction,i=t.keyCode,n=a._status;switch(i){case 32:switch(t.preventDefault(),n){case ht.pause:a.continue();break;case ht.running:a.pause();break;default:break}break;default:break}for(var o in e)e[o].keyCode.indexOf(i)>-1&&(t.preventDefault(),a.pushDirection(+o))},this.next=function(){if(a._status===ht.running){a.updateDirection();var t=a._speed>30?1:300-10*a._speed,e=a._snake,i=a._direction[a._snakeDirection],n=a._content,o=e[0],r=e[e.length-1],s=o.xIndex+i.x,h=o.yIndex+i.y,c=a.getBox(s,h);if(c&&s>=0&&s<n.columns&&h>=0&&h<n.rows){var u=[a.createTween(o,c,t)],l=function(){var t=!0;switch(e.forEach(function(t){delete t.animateX,delete t.animateY}),c.type){case st.empty:r.type=st.empty,e.pop();break;case st.food:var i=a.eat(c);void 0===i||i||(t=!1);break;default:return}e.unshift(c),a.updateSnake(),t&&a._status===ht.running&&a.next(),a.draw()},d=function t(e){var i=!0;u.forEach(function(t){t.update(),i&&!t.complete&&(i=!1)}),a.draw(),i?(a._animation=null,l()):a.updateAnimation(u,t)};if(c.type===st.body||c.type===st.footer)return a.draw(),void a.endGame("1001");if(c.type===st.wall)return a.draw(),void a.endGame("1002");for(var f=1,p=e.length;f<p;f++){var v=e[f],m=e[f-1];u.push(a.createTween(v,m,t))}a.updateAnimation(u,d)}else a.endGame("1003")}};var h={sideLength:18},c=M(e,i,{width:600,height:600});if(r()(h,i,{width:c.width,height:c.height}),!h.origin){h.origin=[];for(var u=6;u>2;u--)h.origin.push({x:u,y:4})}var l=h.sideLength,d=h.width%l/2,f=h.height%l/2,p=h.width-2*f,v=h.height-2*d;this._content={x:f,y:d,width:p,height:v,rows:p/l,columns:v/l},this._canvas=c.canvas,this._options=h,this.init()}return Object(a["a"])(t,[{key:"init",value:function(){var t=this,e=this._options,i=this._canvas,n=i.getContext("2d"),o=this._content,r=e.sideLength;this._ctx=n;for(var s=0;s<o.columns;s++){for(var a=[],h=0;h<o.rows;h++)a.push({x:o.x+s*r,y:o.y+h*r,xIndex:s,yIndex:h,type:st.empty});this._boxes.push(a)}this.reset(),this.drawMap(),this._status=ht.disabled,this._id=G(i,{onStart:function(e){t._startCoordinate=e},onEnd:function(e){if(t._startCoordinate){var i=Math.PI,n={x:t._startCoordinate.x,y:-t._startCoordinate.y},o={x:e.x,y:-e.y},r=Math.acos((o.x-n.x)/Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2))),s=at.right;r>.25*i&&r<.75*i?s=at.up:r>.75*i&&(s=at.left),o.y-n.y<0&&s===at.up&&(s=at.down),t.pushDirection(s)}}}),window.addEventListener("keydown",this.handleKeyboard)}},{key:"pushDirection",value:function(t){var e=this._status;e===ht.running?this._keys.push(t):e===ht.beforeStart&&(this._keys.push(t),this.start())}},{key:"getBox",value:function(t,e){var i=this._boxes,n=i[t];if(n)return n[e]}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,i=this._ctx,n=this._options,o=this._content;i.save(),i.fillStyle="rgba(0,0,0,.6)",i.fillRect(o.x,o.y,o.width,o.height),i.fillStyle="#fff",i.textAlign="center",i.textBaseline="middle",i.font="bold "+e+"px serif",nt()(t)||(t=[t]),t.forEach(function(t,r){i.fillText(t,.5*n.width,.4*n.height+n.sideLength*e*1.1*r,o.width-2*n.sideLength)}),i.restore()}},{key:"drawBox",value:function(t){var e=this._boxTypes,i=this._ctx,n=this._options.sideLength,o=e[t.type],r=t.animateX?t.animateX:t.x,s=t.animateY?t.animateY:t.y;o.background&&(i.save(),i.fillStyle=o.background,i.fillRect(r,s,n,n),i.restore()),o.render&&(i.save(),o.render(i,r,s,n),i.restore())}},{key:"drawMap",value:function(){var t=this._options,e=this._ctx,i=this._content,n=t.sideLength;e.save(),e.beginPath(),e.strokeStyle="#ddd",e.lineWidth=1;for(var o=0;o<=i.columns;o++){var r=i.x+o*n;e.moveTo(r,i.y),e.lineTo(r,i.y+i.height)}for(var s=0;s<=i.rows;s++){var a=i.y+s*n;e.moveTo(i.x,a),e.lineTo(i.x+i.width,a)}e.stroke(),e.restore()}},{key:"drawContent",value:function(){var t=this;this._ctx.save(),this._food.forEach(function(e){t.drawBox(e)}),this._boxes.forEach(function(e){e.forEach(function(e){var i=e.type;i!==st.food&&t.drawBox(e)})}),this._ctx.restore()}},{key:"draw",value:function(){var t=this._options,e=this._ctx;e.clearRect(0,0,t.width,t.height),this.drawMap(),this.drawContent()}},{key:"updateAnimation",value:function(t,e){this._animation={cb:e,id:requestAnimationFrame(e),tweens:t}}},{key:"createTween",value:function(t,e,i){var n=new _t({x:t.x,y:t.y,onUpdate:function(e){r()(t,{animateX:e.x,animateY:e.y})}}).to({x:e.x,y:e.y},i).start();return n}},{key:"updateDirection",value:function(){var t=this._keys,e=t.length;if(e>0)for(var i=e-1;i>=0;i--){var n=t[i];if(n!==this._snakeDirection&&n!==this._direction[this._snakeDirection].opposite){this._snakeDirection=n,this._keys=t.slice(i+1);break}}}},{key:"updateSnake",value:function(){var t=this._snake;t.forEach(function(t){t.type=st.body}),t[0].type=st.head,t[t.length-1].type=st.footer}},{key:"pauseGame",value:function(t){var e=this;this._status===ht.running&&(this._animation?(cancelAnimationFrame(this._animation.id),t()):requestAnimationFrame(function(){e.pauseGame(t)}))}},{key:"pause",value:function(){var t=this;this.pauseGame(function(){t._status=ht.pause,t.info("Pause")})}},{key:"continue",value:function(){this._status===ht.pause&&(this._animation?(this._animation.tweens.forEach(function(t){t.complete||t.start()}),this._status=ht.running,this.updateAnimation(this._animation.tweens,this._animation.cb)):this.continue())}},{key:"eat",value:function(t){var e=this.score,i=this._food;if(this._food=i.splice(i.indexOf(t)),this.createFood(),this._options.scoreCallback)return this._options.scoreCallback(e,this.speed,this)}},{key:"createFood",value:function(){var t=this._content,e=Math.floor(Math.random()*t.columns),i=Math.floor(Math.random()*t.rows),n=this.getBox(e,i);return n.type!==st.empty?this.createFood():(n.type=st.food,this._food.push(n),n)}},{key:"reset",value:function(){var t=this;this._status=ht.beforeStart,this._food=[],this._wall=[],this._keys=[],this._snakeDirection=at.right,this._boxes.forEach(function(t){t.forEach(function(t){t.type=st.empty})}),this._snake=this._options.origin.map(function(e){return t.getBox(e.x,e.y)}),this.updateSnake(),this.createFood()}},{key:"start",value:function(){this._status=ht.running,this.draw(),this.next()}},{key:"endGame",value:function(e){this._options.endCallback&&this._options.endCallback({code:Number(e),message:t.EndReasons[e]},this),this._status=ht.end}},{key:"nextLevel",value:function(t){var e=this;this.pauseGame(function(){e.info(t),e._status=ht.end})}},{key:"fillWall",value:function(t){var e=this._content,i=0;while(i<t){var n=this.getBox(Math.floor(Math.random()*e.columns),Math.floor(Math.random()*e.rows));n.type===st.empty&&(n.type=st.wall,this._wall.push(n),i++)}}},{key:"disable",value:function(){var t=this,e=this._status;return this._status=ht.disabled,function(){t._status=e}}},{key:"prepareStart",value:function(){this.reset(),this.draw()}},{key:"destroy",value:function(){Y(this._id),window.removeEventListener("keydown",this.handleKeyboard)}},{key:"speed",set:function(t){this._speed=t},get:function(){return this._speed}},{key:"score",get:function(){return this._snake&&this._snake.length?this._snake.length-this._options.origin.length+1:0}}]),t}();yt.EndReasons={1001:"红烧蛇肉",1002:"撞墙啦",1003:"撞边界啦"};i("f24f");var bt=n["a"].extend({data:function(){return{message:"",title:"",cb:null,visible:!1}},render:function(){var t=arguments[0],e=this.cb,i=e?{click:e}:{};return t("transition",{attrs:{name:"fade"},on:{"after-leave":this.doDestroy}},[t("div",{class:"message__wrapper",directives:[{name:"show",value:this.visible}]},[t("div",{class:"message__mask"}),t("div",{class:"message"},[t("header",{class:"message__header"},[this.title]),t("div",{class:"message__content"},[this.message]),t("footer",{class:"message__footer"},[t("button",{attrs:{type:"button"},on:Object(_["a"])({},i)},["确定"])])])])])},methods:{doDestroy:function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)}}}),wt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,i=new bt({data:function(){return Object(_["a"])({},t,{cb:function(){t.cb&&t.cb(),i.visible=!1}})}});i.$mount(),e.appendChild(i.$el),i.visible=!0},kt=(i("df54"),{name:"Snake",render:function(){var t=this,e=arguments[0];return e("main",{class:"snake"},[e("section",[e("div",{class:"snake__container",ref:"container"},[e("transition",{attrs:{name:"fade"}},[e("div",{class:"snake__mode-wrapper",directives:[{name:"show",value:this.modeVisible}]},[e("div",{class:"snake__mode"},[this.modes.map(function(i){return e("button",{attrs:{type:"button"},on:{click:function(){return t.start(i.name)}}},[i.label])})])])])])]),e("section",{directives:[{name:"show",value:this.showInfo}],class:"snake__info"},[e("div",{class:"form-group"},[e("span",["分数:"]),e("span",[this.score])]),e("div",{class:"form-group"},[e("span",["速度:"]),e("span",[this.speed])])])])},props:{window:{required:!0,type:Object}},data:function(){return{modes:[{name:"common",label:"普通模式"},{name:"level",label:"过关模式"},{name:"dodge",label:"躲避模式"}],mode:null,modeVisible:!0,score:null,speed:null}},computed:{showInfo:function(){return![this.speed,this.score].some(function(t){return!t&&0!==t})}},methods:{showModes:function(){this.modeVisible=!0},message:function(t,e){return wt({title:"消息提醒",message:t,cb:e},this.$refs.container)},start:function(t){this.modeVisible&&(this.modeVisible=!1,this.mode=t,this.updateMode())},updateMode:function(t,e){switch(this.score=t||0,this.mode){case"common":this.updateCommonMode(t,e);break;case"level":this.updateLevelMode(t,e);break;case"dodge":this.updateDodgeMode(t,e);break;default:break}},updateCommonMode:function(t,e){var i=this.$_snake;if(t){var n=1+2*Math.floor(t/3);this.speed=n}else i.prepareStart(),this.speed=1},updateLevelMode:function(){for(var t=[],e=0,i=0;i<5;i++)t.push({score:5*(i+1),speed:1+5*i});return function(i,n){var o=this,r=t[e],s=this.$_snake,a=function(){s.prepareStart(),o.speed=t[0].speed};i?i>=r.score&&(s.disable(),e>=t.length-1?this.message("厉害啊大兄弟，通关啦！",function(){o.showModes(),e=0}):this.message("下一关啦！",function(){var i=t[e+1];s.prepareStart(),o.speed=i.speed,e++})):a()}}(),updateDodgeMode:function(){for(var t=0,e=[],i=0;i<5;i++)e.push({score:5*(i+1),speed:1+5*i,walls:10*(i+1)});return function(i){var n=this,o=this.$_snake,r=function(){o.prepareStart(),n.speed=e[0].speed,o.fillWall(e[0].walls),o.draw()};if(i){var s=e[t];i>=s.score&&(o.disable(),t>=e.length-1?this.message("牛逼啊大兄弟，通关啦！",function(){n.showModes(),t=0}):this.message("下一关啦！",function(){var i=e[t+1];o.prepareStart(),n.speed=i.speed,o.fillWall(i.walls),o.draw(),t++}))}else r()}}(),sendEndMessage:function(t){var e=this,i=t.message;this.message(i,function(){e.showModes()})}},mounted:function(){var t=this.window,e=t.width>767?600:Math.min(t.width,t.height);this.$_snake=new yt(this.$refs.container,{scoreCallback:this.updateMode,endCallback:this.sendEndMessage,width:e,height:e})},beforeDestroy:function(){this.$_snake.destroy()},watch:{speed:function(t){var e=this.$_snake;e&&e.speed!==t&&(e.speed=t)}}});n["a"].use(b["a"]);var xt=function(t){return t.charAt(0).toLowerCase()+t.slice(1).replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},Ct=[{name:"Clock",component:L},{name:"ColorPicker",component:J},{name:"Cropper",component:dt},{name:"InfiniteScroll",component:vt},{name:"Snake",component:kt}],Mt=new b["a"]({mode:"hash",base:"/dist/",routes:[{path:"/",redirect:{name:"Clock"}}].concat(Object(y["a"])(Ct.map(function(t){return Object(_["a"])({path:"/"+xt(t.name)},t)})),[{path:"*",name:"NotFound",component:w}])}),St=Mt;n["a"].config.productionTip=!1,new n["a"]({el:"#app",router:St,render:function(t){return t(g)}}),console.info("version %c".concat("2.5.1"),"color:#108ee9")},ce93:function(t,e,i){},d2d2:function(t,e,i){},df54:function(t,e,i){},f24f:function(t,e,i){}});
//# sourceMappingURL=app.87f70531.js.map