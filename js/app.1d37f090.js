(function(t){function e(e){for(var n,r,s=e[0],h=e[1],c=e[2],l=0,d=[];l<s.length;l++)r=s[l],o[r]&&d.push(o[r][0]),o[r]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,s=1;s<i.length;s++){var h=i[s];0!==o[h]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={app:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/ife/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=h;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"233c":function(t,e,i){},4189:function(t,e,i){},6175:function(t,e,i){t.exports=i.p+"img/default.745351e1.jpg"},"7d57":function(t,e,i){},"9a32":function(t,e,i){},b20f:function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d"),i("b20f");var n=i("2b0e"),o=(i("7f7f"),i("5176")),a=i.n(o),r=i("d225"),s=i("b0b4");i("9a32");function h(t){var e=[],i=window.innerWidth,n=window.innerHeight,o=.04*i,a=.06*n,r=.01*i,s=.01*i,h=function(t,e){var i=t.el,o=e.el,h=e.top+o.offsetHeight+r;h+i.offsetHeight>n?t.setPosition(a,e.right+o.offsetWidth+s):t.setPosition(h,e.right)};return function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.delay,r=new c(i);e.length>0?h(r,e[e.length-1]):r.setPosition(a,o),e.push(r),r.show(),setTimeout(function(){if(r.hide(),e.splice(0,1),e.length>0&&(e[0].setPosition(a,o),e.length>1))for(var t=1,i=e.length;t<i;t++)h(e[t],e[t-1])},n)}}var c=function(){function t(e){var i=this;Object(r["a"])(this,t),this.show=function(){i._el.classList.add("show")},this.hide=function(){i._el.classList.remove("show"),i._el.classList.add("hide"),setTimeout(function(){document.body.removeChild(i._el)},300)},this._message=e,this.init()}return Object(s["a"])(t,[{key:"init",value:function(){var t=document.createElement("div");t.classList.add("toast"),t.innerHTML=this._message,document.body.appendChild(t),this._el=t}},{key:"setPosition",value:function(t,e){var i=this.el;this.top=t,this.right=e,a()(i.style,{top:t+"px",right:e+"px"})}},{key:"el",get:function(){return this._el}}]),t}(),u=h({delay:5e3}),l=function(t,e){var i=null;return function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];i&&clearTimeout(i),i=setTimeout(function(){t.apply(void 0,o)},e)}};function d(t){return"number"===typeof t}for(var f=!!window.localStorage,p="DING_MENU_VISIBLE",v=function(){if(!f)return!0;var t=localStorage.getItem(p);try{return JSON.parse(t)}catch(e){return!0}},m=function(t){f&&localStorage.setItem(p,t)},g=(i("233c"),function(){return{width:window.innerWidth,height:window.innerHeight}}),_={name:"App",data:function(){return{menus:[{label:"动画时钟",name:"Clock"},{label:"颜色选择器",name:"ColorPicker"},{label:"图片裁剪器",name:"Cropper"},{label:"无限滚动列表",name:"InfiniteScroll"},{label:"贪食蛇",name:"Snake"}],menusVisible:v(),window:g(),contentOffsetTop:0}},computed:{isMobile:function(){return this.window.width<768},shouldMenuVisible:function(){return!this.isMobile||this.menusVisible}},render:function(){var t=arguments[0];return t("div",{attrs:{id:"app"},class:"app"},[t("header",{class:"app__header"},[t("h1",{class:"app__logo"},[t("a",{attrs:{href:"https://ding-js.github.io/ife"}},["ding-js"])]),t("nav",{class:"app__nav",directives:[{name:"show",value:this.shouldMenuVisible}]},[this.menus.map(function(e){return t("router-link",{key:e.name,attrs:{to:{name:e.name},tag:"li"}},[t("a",[e.label])])}),t("li",[t("a",{attrs:{href:"https://github.com/ding-js/ife/tree/master/src/containers/".concat(this.$route.name),target:"_blank"}},["查看源码"])])]),this.isMobile?t("div",[t("svg",{on:{click:this.expandToggle},attrs:{fill:"#666",height:"36",width:"36",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},class:{"app__nav-btn":!0,"app__nav-btn--expand":this.shouldMenuVisible}},[t("path",{attrs:{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}}),t("path",{attrs:{d:"M0-.75h24v24H0z",fill:"none"}})])]):null]),t("div",{class:"app__body"},[t("div",{class:"content",ref:"content",style:{minHeight:"".concat(this.window.height-this.contentOffsetTop-24,"px")}},[t("router-view",{attrs:{window:this.window}})])])])},mounted:function(){var t=this;this.$_handleResize=l(function(){t.window=g(),t.updateContentOffsetHeight()},100),this.updateContentOffsetHeight(),window.addEventListener("resize",this.$_handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.$_handleResize)},methods:{expandToggle:function(){this.menusVisible=!this.menusVisible},updateContentOffsetHeight:function(){var t=this.$refs.content;t&&(this.contentOffsetTop=t.offsetTop)}},watch:{menusVisible:function(t){var e=this;m(t),this.$nextTick(function(){e.updateContentOffsetHeight()})}}},y=i("cebc"),w=i("75fc"),b=(i("a481"),i("8c4f")),k=i("bfb3"),x=i.n(k),C=(i("c5f6"),i("14b9"),i("768b")),M=(i("ac6a"),i("6b54"),i("6c7b"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!t.tagName)throw new Error("Invalid element");var n,o=["width","height"].map(function(n){return"number"===typeof e[n]?e[n]:+t.getAttribute(n)||i[n]||+t["offset"+n.charAt(0).toUpperCase()+n.slice(1)]||0}),a=Object(C["a"])(o,2),r=a[0],s=a[1];if(!r||!s)throw new Error("Invalid options");return"CANVAS"===t.tagName?n=t:(n=document.createElement("canvas"),t.appendChild(n)),n.setAttribute("width",r),n.setAttribute("height",s),{canvas:n,width:r,height:s}}),O=function(){function t(e,i){Object(r["a"])(this,t),this._alarms=[];var n={color:"#9b9b9b"},o=M(e,i,{width:300,height:300}),s=o.canvas;a()(n,i,{width:o.width,height:o.height});var h=Math.min(n.width,n.height)/2;(!n.radius||n.radius>h||n.radius<=1)&&(n.radius=h),this._options=n,this._canvas=s,this._ctx=s.getContext("2d"),this.offset=void 0,this._draw()}return Object(s["a"])(t,[{key:"_draw",value:function(){var t=this,e=this._ctx,i=this._options,n=i.width,o=i.height,a=this._getCurrentTime();e.clearRect(0,0,n,o),this._drawClockDial(),this._drawClockHands(),this._checkAlarms(a.date),this._requestId=window.requestAnimationFrame(function(){return t._draw()})}},{key:"_drawClockDial",value:function(){var t=this._ctx,e=this._options,i=e.width,n=e.height,o=e.color,a=e.radius,r={x:i/2,y:n/2},s=.08*a,h=a-s/2,c=this._getCurrentTime();t.save(),t.strokeStyle=o,t.lineWidth=s,t.beginPath(),t.arc(r.x,r.y,h,0,2*Math.PI),t.stroke(),t.restore(),t.save();var u=60,l=.1*a,d=.02*a+s,f=.028*a,p=f/2;t.fillStyle=o,t.translate(r.x,r.y);for(var v=0;v<u;v++){var m=v%5===0?f:p,g=-m/2,_=-a+d;t.beginPath(),t.rect(g,_,m,l),t.fill(),t.rotate(2*Math.PI/u)}t.restore(),t.save();var y=.69*a,w=.18*a;t.fillStyle=o,t.font=this._generateCtxFont(w),t.textAlign="center",t.textBaseline="middle";for(var b=1;b<=12;b++){var k=2*Math.PI*b/12,x=a+y*Math.sin(k),C=a-y*Math.cos(k);t.fillText(b.toString(),x,C)}t.font=this._generateCtxFont(.6*w),t.fillText("".concat(c.hour<12?"A.M":"P.M"),r.x,.3*n),t.restore(),t.setTransform(1,0,0,1,0,0)}},{key:"_drawClockHands",value:function(){var t=this._ctx,e=this._options,i=e.width,n=e.height,o=e.color,a=e.radius,r={x:i/2,y:n/2},s=this._getCurrentTime(),h=[{topY:-.72,bottomY:.24,degree:s.secondDegree,bottomWidth:.02,topWidth:.01},{topY:-.6,bottomY:.18,degree:s.minuteDegree,bottomWidth:.06,topWidth:.03},{topY:-.4,bottomY:.13,degree:s.hourDegree,bottomWidth:.045,topWidth:.02}],c=Math.tan(2*Math.PI*30/360),u=Math.tan(2*Math.PI*60/360);t.save(),t.fillStyle=o,h.forEach(function(e){var i=a*e.bottomY,n=a*e.bottomWidth/2,o=n/u,s=a*e.topY,h=a*e.topWidth/2,l=h/c;t.setTransform(1,0,0,1,r.x,r.y),t.rotate(e.degree),t.beginPath(),t.moveTo(0,i),t.lineTo(-n,i-o),t.lineTo(-h,s+l),t.lineTo(0,s),t.lineTo(h,s+l),t.lineTo(n,i-o),t.lineTo(0,i),t.fill()}),t.setTransform(1,0,0,1,0,0),t.restore(),t.save(),t.fillStyle="#ffffff",t.beginPath(),t.arc(r.x,r.y,.02*a,0,2*Math.PI),t.fill(),t.restore()}},{key:"_generateCtxFont",value:function(t){return"".concat(t.toFixed(2),"px Arial, Helvetica, sans-serif")}},{key:"_getCurrentTime",value:function(){var t=new Date,e=d(this._offset)?new Date(t.getTime()+this._offset):t,i=[e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()],n=i[0],o=i[1],a=i[2],r=i[3],s=a+r/1e3,h=o+s/60,c=n+h/60,u=[c/12,h/60,s/60].map(function(t){return 2*t*Math.PI}),l=Object(C["a"])(u,3),f=l[0],p=l[1],v=l[2];return{date:e,hourDegree:f,minuteDegree:p,secondDegree:v,hour:n,minute:o,second:a}}},{key:"_checkAlarms",value:function(t){var e=this._alarms;if(e&&e.length)for(var i=0;i<e.length;i++){var n=e[i],o=60*n.time.getTimezoneOffset()*1e3;Math.abs(t.getTime()-n.time.getTime()+o)<500&&(n.repeat||(this._alarms.splice(i,i+1),i--),n.cb())}}},{key:"addAlarm",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._alarms||(this._alarms=[]),this._alarms.push({time:t,cb:e,repeat:i})}},{key:"clearAlarms",value:function(){this._alarms=[]}},{key:"destroy",value:function(){this._requestId&&window.cancelAnimationFrame(this._requestId),this._canvas&&this._canvas.parentNode.removeChild(this._canvas)}},{key:"offset",set:function(t){this._offset=d(t)?t:60*-(new Date).getTimezoneOffset()*1e3},get:function(){return this._offset}},{key:"alarms",get:function(){return this._alarms}}]),t}(),S=(i("7d57"),function(){var t=new Date;return{hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds(),offset:60*-(new Date).getTimezoneOffset()*1e3}}),E=[{name:"hours",label:"小时",max:23},{name:"minutes",label:"分钟",max:59},{name:"seconds",label:"秒",max:59}],T=[],j=12;j>=-12;j--){var D="UTC";j>0?D+="+".concat(j):j<0&&(D+=j),T.push({name:D,offset:60*j*60*1e3})}var P,L={name:"Clock",data:function(){return{time:S(),alarms:[]}},render:function(){var t=this,e=arguments[0];return e("div",{class:"clock"},[e("section",[e("canvas",{ref:"canvas"})]),e("section",[e("form",{class:"clock__time-from",on:{submit:function(e){e.preventDefault(),t.setTime()}}},[E.map(function(i){return e("div",{class:"form-group"},[e("label",{attrs:{for:i.name}},[i.label,"："]),e("input",{attrs:{type:"number",max:i.max,min:"0",step:"1"},domProps:{value:t.time[i.name]},on:{input:function(e){t.updateInput(e,i)}}})])}),e("div",{class:"form-group"},[e("label",{attrs:{for:"offset"}},["时区："]),e("select",{domProps:{value:this.time.offset},on:{change:this.updateZone}},[T.map(function(t){return e("option",{key:t.name,domProps:{value:t.offset}},[t.name])})])])])]),e("section",[e("div",{class:"clock__btns"},[e("button",{attrs:{type:"button"},on:{click:this.setTime}},["设置时间"]),e("button",{attrs:{type:"button"},on:{click:this.addAlarm}},["设置闹钟"]),e("button",{attrs:{type:"button"},on:{click:this.clearAlarms}},["清除闹钟"]),e("button",{attrs:{type:"button"},on:{click:this.resetClock}},["还原时钟"])])]),e("section",[e("div",{class:"clock__alarms"},[!this.alarms||this.alarms.length<1?e("p",["暂无闹钟"]):this.alarms.map(function(t,i){return e("p",{key:i},["闹铃时间：",t.time.toLocaleString()])})])])])},methods:{updateInput:function(t,e){var i=Number(t.target.value),n=i;(x()(i)||i<0)&&(n=0),n>e.max&&(n=e.max),this.time[e.name]=n},updateZone:function(t){var e=Number(t.target.value);this.time.offset=e,this.$_clock.offset=e},setTime:function(){var t=this.$_clock,e=new Date,i=this.getFormTime(),n=i.getTime()-e.getTime()+this.time.offset;t.offset=n},addAlarm:function(){var t=this.$_clock,e=this.getFormTime();t.addAlarm(e,this.triggerAlarm,!1),this.alarms=t.alarms},clearAlarms:function(){var t=this.$_clock;t.clearAlarms(),this.alarms=[]},getFormTime:function(){var t=new Date,e=[t.getFullYear(),t.getMonth(),t.getDate()],i=e[0],n=e[1],o=e[2],a=this.time,r=a.hours,s=a.minutes,h=a.seconds,c=new Date(i,n,o,r,s,h);return c},triggerAlarm:function(){var t=this.$_clock;this.alarms=t.alarms,u("闹钟响啦...")},resetClock:function(){var t=this.$_clock;a()(this.time,S()),t.offset=void 0}},mounted:function(){this.$_clock=new O(this.$refs.canvas)},beforeDestroy:function(){this.$_clock&&this.$_clock.destroy()}},I=i("e814"),$=i.n(I),H=i("5d73"),A=i.n(H),R=i("bd86"),W=i("bb15"),z=i("7618"),B=i("2d7d"),F=i.n(B),N=new F.a,Y=0,G=function(t,e){if(e.touches){var i=t.getBoundingClientRect(),n=e.touches[0];return{x:n.clientX-i.left,y:n.clientY-i.top}}return{x:e.offsetX,y:e.offsetY}},V=function(t,e){var i={};switch(Object(z["a"])(e)){case"function":i.onMove=e;break;case"object":a()(i,e);break;default:break}var n={last:null,move:function(e){if(e.target===t){var o=G(t,e);n.last=o,i.onMove&&i.onMove(o)}},start:function(e){e.preventDefault(),e.target===t&&(i.onStart&&i.onStart(G(t,e)),document.addEventListener("mousemove",n.move),document.addEventListener("touchmove",n.move))},end:function(){i.onEnd&&i.onEnd(n.last),document.removeEventListener("mousemove",n.move),document.removeEventListener("touchmove",n.move)},bind:function(){t.addEventListener("mousedown",n.start),t.addEventListener("touchstart",n.start),document.addEventListener("mouseup",n.end),document.addEventListener("touchend",n.end)},unbind:function(){n.end(),t.removeEventListener("mousedown",n.start),t.removeEventListener("touchstart",n.start),document.removeEventListener("mouseup",n.end),document.removeEventListener("touchend",n.end)}};return n.bind(),Y++,N.set(Y,n),Y},U=function(t){var e=N.get(t);e&&(e.unbind(),N.delete(t))},X=function(){function t(e,i){Object(r["a"])(this,t);var n={padding:10};M(e,i),i&&a()(n,i),this._options=n,this._canvas=e,this._init()}return Object(s["a"])(t,[{key:"_init",value:function(){for(var t=this,e=this._options,i=e.padding,n=e.width,o=e.height,a=this._canvas,r=a.getContext("2d"),s=r.createLinearGradient(i,i,i,o-2*i),h=0;h<=6;h++){var c=h/6,u=W["hsv"].rgb([360*c,100,100]),l=Object(C["a"])(u,3),d=l[0],f=l[1],p=l[2];s.addColorStop(h/6,"rgb(".concat(d,",").concat(f,",").concat(p,")"))}this._contentWidth=n-2*i,this._contentHeight=o-2*i,this._gradient=s,this._ctx=r,this._id=V(a,function(e){t._setCoordinate(e.y)})}},{key:"_draw",value:function(){var t=this._options,e=t.width,i=t.height;this._ctx.clearRect(0,0,e,i),this._drawColors(),this._drawSlider()}},{key:"_drawColors",value:function(){var t=this._gradient,e=this._ctx,i=this._options.padding;e.fillStyle=t,e.fillRect(i,i,this._contentWidth,this._contentHeight)}},{key:"_drawSlider",value:function(){if(d(this._y)){var t=this._options,e=t.padding,i=t.width,n=1,o=this._y,a=i,r=e/2,s=this._ctx;s.save(),s.strokeStyle="#000",s.strokeRect(0,o-r/2,a,r),s.strokeStyle="#fff",s.strokeRect(n,o-r/2+n,a-2*n,r-2*n),s.stroke(),s.restore()}}},{key:"_setCoordinate",value:function(t){var e,i=this._options,n=i.padding,o=i.height;if(e=t<n?n:t>o-n?o-n:t,this._y!==e){if(this._y=e,this._options.onColorChange){var a=(e-n)/this._contentHeight,r=Math.floor(360*a),s=[r,void 0,void 0];this._color=s,this._options.onColorChange(s)}this._draw()}}},{key:"destroy",value:function(){U(this._id),this._canvas.parentNode.removeChild(this._canvas)}},{key:"color",set:function(t){if(!this._color||t[0]!==this._color[0]){var e=this._options.padding,i=t[0]/360,n=this._contentHeight*i+e;this._setCoordinate(n)}},get:function(){return this._color}}]),t}(),q=function(){function t(e,i){Object(r["a"])(this,t);var n={padding:10};M(e,i),i&&a()(n,i),this._options=n,this._canvas=e,this._init()}return Object(s["a"])(t,[{key:"_init",value:function(){var t=this,e=this._canvas,i=e.getContext("2d"),n=this._options,o=n.width,a=n.height,r=n.padding,s=o-2*r,h=a-2*r;this._ctx=i,this._contentWidth=s,this._contentHeight=h,this._id=V(e,function(e){var i=e.x,n=e.y;t._setCoordinate(i,n)}),this._initBackground()}},{key:"_initBackground",value:function(){var t=this._ctx,e=this._options,i=e.padding,n=e.width,o=e.height,a=t.createLinearGradient(n/2,o-i,n/2,i),r=t.createLinearGradient(i,o/2,n-i,o/2);r.addColorStop(0,"#fff"),r.addColorStop(1,"rgba(0,0,0,0)"),a.addColorStop(0,"#000"),a.addColorStop(1,"rgba(0,0,0,0)"),this._whiteGradient=r,this._blackGradient=a}},{key:"_draw",value:function(){var t=this._ctx,e=this._options,i=e.width,n=e.height;t.clearRect(0,0,i,n),this._drawColors(),this._drawPointer()}},{key:"_drawColors",value:function(){var t=this._ctx,e=this._contentWidth,i=this._contentHeight,n=this._hue,o=this._options.padding;n&&(t.save(),t.fillStyle=n,t.fillRect(o,o,e,i),t.restore(),[this._whiteGradient,this._blackGradient].forEach(function(n){t.save(),t.fillStyle=n,t.fillRect(o,o,e,i),t.restore()}))}},{key:"_drawPointer",value:function(){var t=this._options.padding,e=this._x,i=this._y;if(d(e)&&d(i)){var n=this._ctx;n.save(),n.strokeStyle="#000",n.beginPath(),n.arc(e,i,t/2,0,2*Math.PI),n.stroke(),n.restore(),n.strokeStyle="#fff",n.beginPath(),n.arc(e,i,t/2-1,0,2*Math.PI),n.stroke(),n.restore()}}},{key:"_setCoordinate",value:function(t,e){var i,n,o=this._options.padding,a=this._contentHeight,r=this._contentWidth;if(i=t<o?o:t>r+o?r+o:t,n=e<o?o:e>a+o?a+o:e,this._x=i,this._y=n,this._options.onColorChange){var s=[this.color[0],(i-o)/r*100,100*(1-(n-o)/a)];this._color=s,this._options.onColorChange(s)}this._draw()}},{key:"_updateHue",value:function(){var t=this._color[0];if(d(t)){var e=W["hsv"].rgb([t,100,100]),i=Object(C["a"])(e,3),n=i[0],o=i[1],a=i[2];this._hue="rgb(".concat(n,",").concat(o,",").concat(a,")")}}},{key:"_updateCoordinate",value:function(){var t=this._contentWidth,e=this._contentHeight,i=this._options,n=Object(C["a"])(this._color,3),o=n[1],a=n[2];this._x=o*t/100+i.padding,this._y=(100-a)*e/100+i.padding}},{key:"destroy",value:function(){U(this._id),this._canvas.parentNode.removeChild(this._canvas)}},{key:"color",set:function(t){var e=this,i=this._color?this._color.slice():new Array(3),n=!1;t.forEach(function(t,o){d(t)&&(e._color&&i[o]===t||(i[o]=t,n=!0))}),n&&(this._color=i,this._updateHue(),this._updateCoordinate(),this._draw())},get:function(){return this._color}}]),t}(),J=function(){function t(e,i){Object(r["a"])(this,t);var n={height:300,blockWidth:300,barWidth:40,padding:10};a()(n,i),this._options=n,this._container=e,this._init()}return Object(s["a"])(t,[{key:"_init",value:function(){var t=this,e=this._options,i=e.height,n=e.blockWidth,o=e.barWidth,a=document.createElement("canvas"),r=document.createElement("canvas"),s={width:n,height:i,onColorChange:function(e){var i=Object(C["a"])(e,3),n=i[1],o=i[2];t.color={hsv:[void 0,n,o]}}},h={width:o,height:i,onColorChange:function(e){var i=Object(C["a"])(e,1),n=i[0];t.color={hsv:[n,void 0,void 0]}}};this._container.appendChild(a),this._container.appendChild(r),this._block=new q(a,s),this._bar=new X(r,h),this.color={hsv:[0,50,50]}}},{key:"_handleColorChange",value:function(t){var e=this._color,i=Object(C["a"])(e,3),n=i[0],o=i[1],a=i[2];if(d(n)&&(this._bar.color=e),d(o)&&d(a)&&(this._block.color=e),"function"===typeof this._options.onColorChange){var r=t.rgb||W["hsv"].rgb([n,o,a]),s=W["rgb"].hsl(r),h=W["rgb"].hex(r);this._options.onColorChange(Object(y["a"])({hex:h,hsl:s,rgb:r,hsv:e},t))}}},{key:"destroy",value:function(){this._block.destroy(),this._bar.destroy()}},{key:"color",set:function(t){var e=this;if(this._bar&&this._block){var i,n;if(t.rgb)n=W["rgb"].hsv(t.rgb),i={rgb:t.rgb};else if(t.hsl)n=W["hsl"].hsv(t.hsl),i={hsl:t.hsl};else if(t.hex)n=W["rgb"].hsv(W["hex"].rgb(t.hex)),i={hex:t.hex};else{if(!t.hsv)return;n=t.hsv,i={hsv:t.hsv}}this._color&&(this._color.forEach(function(t,e){d(n[e])||(n[e]=t)}),n.every(function(t,i){return t===e._color[i]}))||(this._color=n,this._handleColorChange(i))}}}]),t}(),K=(i("d2d2"),{name:"ColorPicker",data:function(){return{color:{rgb:[],hsl:[],hex:""}}},render:function(){var t=this,e=arguments[0],i="hsl",n="rgb";return e("div",{class:"color-picker"},[e("section",{class:"picker-wrapper"},[e("div",{attrs:{id:"picker"},ref:"picker"})]),e("section",[e("form",{on:{submit:function(t){t.preventDefault()}}},[e("div",{class:"row"},[["r","g","b"].map(function(i,o){return e("div",{class:"form-group"},[e("label",{attrs:{for:i}},[i.toUpperCase(),":"]),e("input",{attrs:{type:"number",max:"255",min:"0",step:"1"},domProps:{value:t.color[n][o]},on:{input:function(e){return t.updateInput(e,o,n)}}})])})]),e("div",{class:"row"},[["h","s","l"].map(function(n,o){return e("div",{class:"form-group"},[e("label",{attrs:{for:n}},[n.toUpperCase(),":"]),e("input",{attrs:{type:"number",max:"h"===n?"360":"100",min:"0",step:"h"===n?"5":"1"},domProps:{value:t.color[i][o]},on:{input:function(e){return t.updateInput(e,o,i)}}})])})]),e("div",{class:"row"},[e("div",{class:"form-group"},[e("label",{attrs:{for:"hex"}},["#"]),e("input",{attrs:{type:"text",maxlength:"6"},domProps:{value:this.color.hex.toUpperCase()},on:{input:this.updateColorByHEX}})])])])]),e("section",[e("div",{class:"color-picker__preview",style:{backgroundColor:"#"+this.color.hex}})])])},methods:{updateInput:function(t,e,i){if(i){var n=t.target,o=Number(n.value),a=Number(n.getAttribute("max")),r=Number(n.getAttribute("min")),s=o;x()(o)&&(s=r),s>a&&(s=a),s<r&&(s=r);var h=this.color[i].slice();h[e]=s,this.$_picker.color=Object(R["a"])({},i,h)}},updateColorByHEX:function(t){var e=t.target.value.toUpperCase();if(t.target.value=e,6===e.length||3===e.length){var i=!0,n=!1,o=void 0;try{for(var a,r=A()(e);!(i=(a=r.next()).done);i=!0){var s=a.value,h=$()(s,16);if(x()(h)||h>15)return}}catch(c){n=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(n)throw o}}this.$_picker.color={hex:e}}}},mounted:function(){var t=this;this.$_picker=new J(this.$refs.picker,{onColorChange:function(e){a()(t.color,e)}})},beforeDestroy:function(){this.$_picker&&this.$_picker.destroy()}}),Z=(i("96cf"),i("3b8d")),Q=(i("4917"),i("a4bb")),tt=i.n(Q),et=i("795b"),it=i.n(et),nt=i("a745"),ot=i.n(nt);(function(t){t[t["cropper"]=0]="cropper",t[t["image"]=1]="image",t[t["pointRD"]=2]="pointRD",t[t["background"]=3]="background"})(P||(P={}));var at=function(){function t(e,i){var n,o=this;Object(r["a"])(this,t),this._scale=1,this.handleStart=function(t){o._startPoint=o.getPointByCoordinate(t.x,t.y)},this.handleMove=function(t){var e=o._types[o._startPoint.type];e&&e.handler&&e.handler(t)},this.handleMouseWheel=function(t){t.preventDefault();var e=o._image;if(e){var i,n=e.clientWidth,a=e.clientHeight,r=o._scale,s=t.deltaY/800;i=s>0?1/(1+s):1+Math.abs(s),i*=r,o._scale=i,n*=i,a*=i,e.x+=(e.width-n)/2,e.y+=(e.height-a)/2,e.width=n,e.height=a,o.draw()}},this.handleImageMove=function(t){var e=t.x,i=t.y,n=o._startPoint;o._image.x=e-n.offsetX,o._image.y=i-n.offsetY,o.draw()},this.handleCropperMove=function(t){var e=t.x,i=t.y,n=o._options,a=n.width,r=n.height,s=o._startPoint,h=s.offsetX,c=s.offsetY,u=a-o._cropper.width,l=r-o._cropper.height,d=e-h,f=i-c;d<0&&(d=0),d>u&&(d=u),f<0&&(f=0),f>l&&(f=l),o.cropper={x:d,y:f}},this.handlePointMove=function(t){var e=t.x,i=t.y,n=(o._startPoint,e-o._cropper.x),a=i-o._cropper.y;n<=0||a<=0||(o.cropper={width:n,height:a})};var a=M(e,i,{width:700,height:450}),s=Object(y["a"])({},i,{width:a.width,height:a.height});this._canvas=a.canvas,this._ctx=a.canvas.getContext("2d"),this._options=s,this._types=(n={},Object(R["a"])(n,P.cropper,{cursor:"all-scroll",handler:this.handleCropperMove}),Object(R["a"])(n,P.image,{cursor:"default",handler:this.handleImageMove}),Object(R["a"])(n,P.pointRD,{cursor:"nwse-resize",handler:this.handlePointMove}),Object(R["a"])(n,P.background,{cursor:"default"}),n),this.init()}return Object(s["a"])(t,[{key:"init",value:function(){var t=this._options,e=this._canvas,i=t.width/3,n=t.height/3;this._cropperCanvas=document.createElement("canvas"),this._cropperCtx=this._cropperCanvas.getContext("2d"),this.cropper={width:i,height:n,x:(t.width-i)/2,y:(t.height-n)/2},t.preview&&(this._previewList=(ot()(t.preview)?t.preview:[t.preview]).map(function(t){var e=document.createElement("canvas");return t.container.appendChild(e),Object(y["a"])({},t,{canvas:e,ctx:e.getContext("2d")})})),e.addEventListener("mousewheel",this.handleMouseWheel),this._id=V(e,{onStart:this.handleStart,onMove:this.handleMove})}},{key:"getPointByCoordinate",value:function(t,e){var i=this._point,n=this._cropper,o=this._image,a={x:t,y:e,type:void 0,offsetX:void 0,offsetY:void 0};return i&&t>i.x&&t<i.x+i.width&&e>i.y&&e<i.y+i.height?a.type=P.pointRD:n&&t>n.x&&t<n.x+n.width&&e>n.y&&e<n.y+n.height?(a.offsetX=t-n.x,a.offsetY=e-n.y,a.type=P.cropper):o&&t>o.x&&t<o.x+o.width&&e>o.y&&e<o.y+o.height?(a.offsetX=t-o.x,a.offsetY=e-o.y,a.type=P.image):a.type=P.background,a}},{key:"updatePoint",value:function(){var t=this._cropper,e=8,i=8;this._point={width:e,height:i,x:t.x+t.width-e/2,y:t.y+t.height-i/2}}},{key:"fillBackground",value:function(){var t=this._options,e=t.width,i=t.height,n=this._ctx,o=e/40,a=Math.ceil(e/o),r=Math.ceil(i/o);n.save(),n.fillStyle="#ccc";for(var s=0,h=0;h<r;h++)for(var c=0;c<a;c++)(s+h)%2===0&&n.fillRect(c*o,h*o,o,o),s++;n.fillStyle="rgba(0,0,0,0.1)",n.fillRect(0,0,e,i),n.restore()}},{key:"fillImage",value:function(){var t=this._ctx,e=this._image;e&&t.drawImage(e.element,e.x,e.y,e.width,e.height)}},{key:"fillCropper",value:function(){var t=this._ctx,e=this._cropper,i=this._point;t.save(),t.strokeStyle="#39f",t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#39f",t.fillRect(i.x,i.y,i.width,i.height),t.restore()}},{key:"draw",value:function(){var t=this._options,e=t.width,i=t.height;this._ctx.clearRect(0,0,e,i),this.fillBackground(),this.fillImage(),this.fillCropper(),this.preview()}},{key:"updateImage",value:function(t){if(t.src){var e=this._options,i=e.width,n=e.height,o=t.width,a=t.height,r=o,s=a,h=1;o>i&&(r=i,h=r/o,s=h*a),s>n&&(s=n,h=s/a,r=h*o),this._image={element:t,width:r,height:s,x:(i-r)/2,y:(n-s)/2,clientWidth:o,clientHeight:a},this._scale=h,this.draw()}}},{key:"preview",value:function(){if(this._previewList&&this._image){this._scale;var t=this._image,e=this._cropper;this._options;this._previewList.forEach(function(i){var n=e.width*i.zoom,o=e.height*i.zoom;i.canvas.width=n,i.canvas.height=o,i.ctx.clearRect(0,0,n,o),i.ctx.drawImage(t.element,(t.x-e.x)*i.zoom,(t.y-e.y)*i.zoom,t.width*i.zoom,t.height*i.zoom)})}}},{key:"crop",value:function(){var e=this;return new it.a(function(i,n){var o=e._options,r=o.width,s=o.height,h=e._image,c=e._cropper,u=e._cropperCtx;h.element||n({code:1001,message:t.Messages["1001"]}),a()(e._cropperCanvas,{width:c.width,height:c.height}),u.clearRect(0,0,r,s),u.drawImage(h.element,h.x-c.x,h.y-c.y,h.width,h.height);var l=e._cropperCanvas.toDataURL();i(l)})}},{key:"destroy",value:function(){var t=function(t){return t.parentNode.removeChild(t)};U(this._id),window.removeEventListener("mousewheel",this.handleMouseWheel),t(this._canvas),this._previewList&&this._previewList.forEach(function(e){t(e.canvas)})}},{key:"image",set:function(t){var e=this;if(t instanceof HTMLImageElement)this.updateImage(t);else{if(!(t instanceof File))return;if(!t.type.match(/^image\/.+$/))return void u("请选择正确的图片文件");var i=new FileReader;i.onload=function(t){var i=new Image;i.src=t.target.result,i.onload=function(){e.updateImage(i)}},i.readAsDataURL(t)}},get:function(){return this._image.element}},{key:"cropper",set:function(t){var e=this;this._cropper||(this._cropper={width:void 0,height:void 0,x:void 0,y:void 0});var i=!1;tt()(t).forEach(function(n){var o=Math.round(t[n]);e._cropper[n]!==o&&(e._cropper[n]=o,i=!0)}),i&&(this.updatePoint(),this._options.onCropperChange&&this._options.onCropperChange(this._cropper),this.draw())},get:function(){return this._cropper}}]),t}();at.Messages={1001:"没有图片"};var rt,st,ht,ct=i("6175"),ut=(i("4189"),document.createElement("a")),lt=0,dt={name:"Cropper",props:{window:{required:!0,type:Object}},data:function(){return{cropperOptions:{width:200,height:200,x:0,y:0},pickText:"点击选择要裁剪的图片",preview:[.6,.9,1.2]}},render:function(t){var e=this;return t("div",{class:"cropper"},[t("section",[t("form",[t("div",{class:"form-group"},[t("input",{attrs:{placeholder:"宽",type:"number",min:"0",max:this.containerSize.width,name:"width"},domProps:{value:this.cropperOptions.width},on:{input:function(t){e.updateSize(t,"width")}}}),t("input",{attrs:{placeholder:"高",type:"number",min:"0",max:this.containerSize.height,name:"height"},domProps:{value:this.cropperOptions.height},on:{input:function(t){e.updateSize(t,"height")}}})]),t("div",{class:"form-group"},[t("button",{attrs:{type:"button"},on:{click:this.setCropper}},["修改大小"]),t("button",{attrs:{type:"button"},on:{click:this.doCrop}},["裁剪"])]),t("div",{class:"form-group"},[t("label",{attrs:{for:"file",id:"pick-file"},class:"cropper__pick"},[this.pickText]),t("input",{attrs:{type:"file",id:"file",accept:"image/jpeg,image/x-icon,image/png"},on:{change:this.uploadImg}})])])]),t("section",[t("div",{ref:"container",class:"cropper__container"})]),t("section",[this.preview.map(function(e){return t("div",{class:"cropper__preview",ref:"preview-".concat(e)})})])])},computed:{containerSize:function(){var t=this.window,e=t.width,i=t.height;if(e>767)return{width:700,height:450};var n=Math.min(e,i);return{width:n,height:n}}},methods:{updateSize:function(t,e){var i=this.cropperOptions,n=this.containerSize,o=Number(t.target.value),a=o;(x()(o)||o<=0)&&(a=1),o>n[e]&&(a=n[e]),i[e]=a},uploadImg:function(t){var e=t.target;if(e.value&&!(e.files.length<1)){var i=e.files[0];i.type.match(/^image\/.+/)?(this.$_cropper.image=i,this.pickText=i.name):u("请选择正确的图片")}},setCropper:function(){if(this.$_cropper){var t=this.cropperOptions,e=t.width,i=t.height,n=[e,i].some(function(t){return[function(t){return!!t},function(t){return t>0}].some(function(e){return!e(t)})});n?u("请输入正确的宽高!"):this.$_cropper.cropper={width:e,height:i}}},doCrop:function(){var t=Object(Z["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$_cropper.crop();case 3:e=t.sent,ut.href=e,ut.download="dingjs-cropper-".concat(++lt,".png"),ut.click(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),u('不支持HTML5,建议使用<a href="https://www.google.com/chrome/">「Chrome浏览器」浏览本页面!</a>');case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),init:function(){var t=this,e=this.containerSize,i=e.width,n=e.height;this.$_cropper=new at(this.$refs.container,{preview:this.preview.map(function(e,i){return{zoom:e,container:t.$refs["preview-".concat(e)]}}),width:i,height:n,onCropperChange:function(e){a()(t.cropperOptions,e)}}),this.setDefault()},setDefault:function(){var t=this,e=new Image;e.src=ct,e.onload=function(){t.$_cropper.image=e}}},mounted:function(){this.init()},beforeDestroy:function(){this.$_cropper.destroy()}},ft=function(){function t(e){var i=this;Object(r["a"])(this,t),this.dataset=[],this.more=!0,this.loading=!1,this.scrollEventSource=window,this.debounceCheckdataset=l(function(){return i.checkDataset()},100);for(var n={contentElement:null,scrollElement:document.documentElement,getDataset:null,noDataHtml:"",loadingHtml:"",threshold:400,autoDestroy:!0,render:function(t,e){return"<div>".concat(e,"</div>")}},o=["contentElement","getDataset"],s=0;s<o.length;s++){var h=o[s];if(!e[h])return void console.warn("Option: ".concat(h," can not be empty"))}e.scrollElement&&(this.scrollEventSource=e.scrollElement),a()(n,e),this.op=n,this.init()}return Object(s["a"])(t,[{key:"shouldGetDataset",value:function(){var t=this.op,e=t.scrollElement,i=t.threshold,n=e.scrollHeight-e.scrollTop-e.clientHeight;return!this.dataset.length||!this.loading&&this.more&&n<i}},{key:"checkDataset",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.shouldGetDataset()){t.next=4;break}return t.next=3,this.fillMoreDataset();case 3:this.checkDataset();case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"fillMoreDataset",value:function(){var t=Object(Z["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.op.getDataset(this.dataset.length);case 3:e=t.sent,this.loading=!1,e.dataset&&e.dataset.length&&(this.dataset=this.dataset.concat(e.dataset),this.more=e.more,!this.more&&this.op.autoDestroy&&this.destroy(),this.updateView());case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"updateView",value:function(){var t,e=this.op,i=e.render,n=e.contentElement,o=e.noDataHtml,a=e.loadingHtml;t=this.dataset.map(i).join(""),t||this.loading?this.more&&(t+=a):t=o,n.innerHTML=t}},{key:"destroy",value:function(){this.scrollEventSource.removeEventListener("scroll",this.debounceCheckdataset)}},{key:"init",value:function(){this.scrollEventSource.addEventListener("scroll",this.debounceCheckdataset),this.checkDataset(),this.updateView()}}]),t}(),pt=(i("ce93"),new Array(100).fill("").map(function(t,e){return e+1})),vt={name:"InfiniteScroll",render:function(){var t=arguments[0];return t("main",{class:"infinite-scroll"},[t("ul",{ref:"list",class:"infinite-scroll__list"})])},mounted:function(){this.$_infiniteScroll=new ft({contentElement:this.$refs.list,loadingHtml:'\n        <p class="infinite-scroll__loading">\n          <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n            <path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" />\n            <path d="M0 0h24v24H0z" fill="none" />\n          </svg>\n        </p>\n      ',noDataHtml:"<p>Empty</p>",render:function(t){return"<li>".concat(t," list item</li>")},getDataset:function(t){return new it.a(function(e){setTimeout(function(){e({dataset:pt.slice(t,t+20),more:t+20<pt.length})},1e3)})}})}},mt={name:"NotFound",render:function(){var t=arguments[0];return t("p",["404 Not Found."])}},gt=i("0a0d"),_t=i.n(gt),yt=function(){function t(e){Object(r["a"])(this,t),this._spend=0,this._complete=!1;var i=e.x,n=e.y;this._init={x:i,y:n},this._current={x:i,y:n},this._options=e}return Object(s["a"])(t,[{key:"to",value:function(t,e){return this._next=t,this._time=e,this}},{key:"start",value:function(){return this._prevTime=_t()(),this.update(),this}},{key:"update",value:function(){var t=_t()();if(this._spend=this._spend+(t-this._prevTime),this._spend>=this._time)this._complete=!0;else{this._prevTime=t;var e=this._spend/this._time;this._current={x:this._init.x+(this._next.x-this._init.x)*e,y:this._init.y+(this._next.y-this._init.y)*e},this._options.onUpdate(this._current)}}},{key:"complete",get:function(){return this._complete}}]),t}();(function(t){t[t["empty"]=0]="empty",t[t["wall"]=1]="wall",t[t["body"]=2]="body",t[t["head"]=3]="head",t[t["footer"]=4]="footer",t[t["food"]=5]="food"})(rt||(rt={})),function(t){t[t["left"]=0]="left",t[t["right"]=1]="right",t[t["up"]=2]="up",t[t["down"]=3]="down"}(st||(st={})),function(t){t[t["beforeStart"]=0]="beforeStart",t[t["end"]=1]="end",t[t["pause"]=2]="pause",t[t["running"]=3]="running",t[t["disabled"]=4]="disabled"}(ht||(ht={}));var wt=function(){function t(e,i){var n,o,s=this;Object(r["a"])(this,t),this._boxes=[],this._speed=1,this._boxTypes=(n={},Object(R["a"])(n,rt.empty,{}),Object(R["a"])(n,rt.wall,{background:"brown"}),Object(R["a"])(n,rt.head,{background:"#555",render:function(t,e,i,n){var o=n/14,a=s._direction[s._snakeDirection],r=n/2,h=[{x:e+r+a.x*o*3+(0===a.x?2.5*o:0),y:i+r+a.y*o*3+(0===a.y?2.5*o:0)},{x:e+r+a.x*o*3+(0===a.x?2.5*-o:0),y:i+r+a.y*o*3+(0===a.y?2.5*-o:0)}];t.fillStyle="#fff",h.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,2*o,0,2*Math.PI),t.fill()})}}),Object(R["a"])(n,rt.body,{render:function(t,e,i,n){t.fillStyle="#888",t.beginPath(),t.arc(e+n/2,i+n/2,n/2,0,2*Math.PI),t.fill()}}),Object(R["a"])(n,rt.footer,{render:function(t,e,i,n){t.fillStyle="#888",t.beginPath(),t.arc(e+n/2,i+n/2,.35*n,0,2*Math.PI),t.fill()}}),Object(R["a"])(n,rt.food,{background:"orange"}),n),this._direction=(o={},Object(R["a"])(o,st.left,{x:-1,y:0,keyCode:[65,37],opposite:st.right}),Object(R["a"])(o,st.right,{x:1,y:0,keyCode:[68,39],opposite:st.left}),Object(R["a"])(o,st.up,{x:0,y:-1,keyCode:[87,38],opposite:st.down}),Object(R["a"])(o,st.down,{x:0,y:1,keyCode:[83,40],opposite:st.up}),o),this.handleKeyboard=function(t){var e=s._direction,i=t.keyCode,n=s._status;switch(i){case 32:switch(t.preventDefault(),n){case ht.pause:s.continue();break;case ht.running:s.pause();break;default:break}break;default:break}for(var o in e)e[o].keyCode.indexOf(i)>-1&&(t.preventDefault(),s.pushDirection(+o))},this.next=function(){if(s._status===ht.running){s.updateDirection();var t=s._speed>30?1:300-10*s._speed,e=s._snake,i=s._direction[s._snakeDirection],n=s._content,o=e[0],a=e[e.length-1],r=o.xIndex+i.x,h=o.yIndex+i.y,c=s.getBox(r,h);if(c&&r>=0&&r<n.columns&&h>=0&&h<n.rows){var u=[s.createTween(o,c,t)],l=function(){var t=!0;switch(e.forEach(function(t){delete t.animateX,delete t.animateY}),c.type){case rt.empty:a.type=rt.empty,e.pop();break;case rt.food:var i=s.eat(c);void 0===i||i||(t=!1);break;default:return}e.unshift(c),s.updateSnake(),t&&s._status===ht.running&&s.next(),s.draw()},d=function t(e){var i=!0;u.forEach(function(t){t.update(),i&&!t.complete&&(i=!1)}),s.draw(),i?(s._animation=null,l()):s.updateAnimation(u,t)};if(c.type===rt.body||c.type===rt.footer)return s.draw(),void s.endGame("1001");if(c.type===rt.wall)return s.draw(),void s.endGame("1002");for(var f=1,p=e.length;f<p;f++){var v=e[f],m=e[f-1];u.push(s.createTween(v,m,t))}s.updateAnimation(u,d)}else s.endGame("1003")}};var h={sideLength:18},c=M(e,i,{width:600,height:600});if(a()(h,i,{width:c.width,height:c.height}),!h.origin){h.origin=[];for(var u=6;u>2;u--)h.origin.push({x:u,y:4})}var l=h.sideLength,d=h.width%l/2,f=h.height%l/2,p=h.width-2*f,v=h.height-2*d;this._content={x:f,y:d,width:p,height:v,rows:p/l,columns:v/l},this._canvas=c.canvas,this._options=h,this.init()}return Object(s["a"])(t,[{key:"init",value:function(){var t=this,e=this._options,i=this._canvas,n=i.getContext("2d"),o=this._content,a=e.sideLength;this._ctx=n;for(var r=0;r<o.columns;r++){for(var s=[],h=0;h<o.rows;h++)s.push({x:o.x+r*a,y:o.y+h*a,xIndex:r,yIndex:h,type:rt.empty});this._boxes.push(s)}this.reset(),this.drawMap(),this._status=ht.disabled,this._id=V(i,{onStart:function(e){t._startCoordinate=e},onEnd:function(e){if(t._startCoordinate){var i=Math.PI,n={x:t._startCoordinate.x,y:-t._startCoordinate.y},o={x:e.x,y:-e.y},a=Math.acos((o.x-n.x)/Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2))),r=st.right;a>.25*i&&a<.75*i?r=st.up:a>.75*i&&(r=st.left),o.y-n.y<0&&r===st.up&&(r=st.down),t.pushDirection(r)}}}),window.addEventListener("keydown",this.handleKeyboard)}},{key:"pushDirection",value:function(t){var e=this._status;e===ht.running?this._keys.push(t):e===ht.beforeStart&&(this._keys.push(t),this.start())}},{key:"getBox",value:function(t,e){var i=this._boxes,n=i[t];if(n)return n[e]}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,i=this._ctx,n=this._options,o=this._content;i.save(),i.fillStyle="rgba(0,0,0,.6)",i.fillRect(o.x,o.y,o.width,o.height),i.fillStyle="#fff",i.textAlign="center",i.textBaseline="middle",i.font="bold "+e+"px serif",ot()(t)||(t=[t]),t.forEach(function(t,a){i.fillText(t,.5*n.width,.4*n.height+n.sideLength*e*1.1*a,o.width-2*n.sideLength)}),i.restore()}},{key:"drawBox",value:function(t){var e=this._boxTypes,i=this._ctx,n=this._options.sideLength,o=e[t.type],a=t.animateX?t.animateX:t.x,r=t.animateY?t.animateY:t.y;o.background&&(i.save(),i.fillStyle=o.background,i.fillRect(a,r,n,n),i.restore()),o.render&&(i.save(),o.render(i,a,r,n),i.restore())}},{key:"drawMap",value:function(){var t=this._options,e=this._ctx,i=this._content,n=t.sideLength;e.save(),e.beginPath(),e.strokeStyle="#ddd",e.lineWidth=1;for(var o=0;o<=i.columns;o++){var a=i.x+o*n;e.moveTo(a,i.y),e.lineTo(a,i.y+i.height)}for(var r=0;r<=i.rows;r++){var s=i.y+r*n;e.moveTo(i.x,s),e.lineTo(i.x+i.width,s)}e.stroke(),e.restore()}},{key:"drawContent",value:function(){var t=this;this._ctx.save(),this._food.forEach(function(e){t.drawBox(e)}),this._boxes.forEach(function(e){e.forEach(function(e){var i=e.type;i!==rt.food&&t.drawBox(e)})}),this._ctx.restore()}},{key:"draw",value:function(){var t=this._options,e=this._ctx;e.clearRect(0,0,t.width,t.height),this.drawMap(),this.drawContent()}},{key:"updateAnimation",value:function(t,e){this._animation={cb:e,id:requestAnimationFrame(e),tweens:t}}},{key:"createTween",value:function(t,e,i){var n=new yt({x:t.x,y:t.y,onUpdate:function(e){a()(t,{animateX:e.x,animateY:e.y})}}).to({x:e.x,y:e.y},i).start();return n}},{key:"updateDirection",value:function(){var t=this._keys,e=t.length;if(e>0)for(var i=e-1;i>=0;i--){var n=t[i];if(n!==this._snakeDirection&&n!==this._direction[this._snakeDirection].opposite){this._snakeDirection=n,this._keys=t.slice(i+1);break}}}},{key:"updateSnake",value:function(){var t=this._snake;t.forEach(function(t){t.type=rt.body}),t[0].type=rt.head,t[t.length-1].type=rt.footer}},{key:"pauseGame",value:function(t){var e=this;this._status===ht.running&&(this._animation?(cancelAnimationFrame(this._animation.id),t()):requestAnimationFrame(function(){e.pauseGame(t)}))}},{key:"pause",value:function(){var t=this;this.pauseGame(function(){t._status=ht.pause,t.info("Pause")})}},{key:"continue",value:function(){this._status===ht.pause&&(this._animation?(this._animation.tweens.forEach(function(t){t.complete||t.start()}),this._status=ht.running,this.updateAnimation(this._animation.tweens,this._animation.cb)):this.continue())}},{key:"eat",value:function(t){var e=this.score,i=this._food;if(this._food=i.splice(i.indexOf(t)),this.createFood(),this._options.scoreCallback)return this._options.scoreCallback(e,this.speed,this)}},{key:"createFood",value:function(){var t=this._content,e=Math.floor(Math.random()*t.columns),i=Math.floor(Math.random()*t.rows),n=this.getBox(e,i);return n.type!==rt.empty?this.createFood():(n.type=rt.food,this._food.push(n),n)}},{key:"reset",value:function(){var t=this;this._status=ht.beforeStart,this._food=[],this._wall=[],this._keys=[],this._snakeDirection=st.right,this._boxes.forEach(function(t){t.forEach(function(t){t.type=rt.empty})}),this._snake=this._options.origin.map(function(e){return t.getBox(e.x,e.y)}),this.updateSnake(),this.createFood()}},{key:"start",value:function(){this._status=ht.running,this.draw(),this.next()}},{key:"endGame",value:function(e){this._options.endCallback&&this._options.endCallback({code:Number(e),message:t.EndReasons[e]},this),this._status=ht.end}},{key:"nextLevel",value:function(t){var e=this;this.pauseGame(function(){e.info(t),e._status=ht.end})}},{key:"fillWall",value:function(t){var e=this._content,i=0;while(i<t){var n=this.getBox(Math.floor(Math.random()*e.columns),Math.floor(Math.random()*e.rows));n.type===rt.empty&&(n.type=rt.wall,this._wall.push(n),i++)}}},{key:"disable",value:function(){var t=this,e=this._status;return this._status=ht.disabled,function(){t._status=e}}},{key:"prepareStart",value:function(){this.reset(),this.draw()}},{key:"destroy",value:function(){U(this._id),window.removeEventListener("keydown",this.handleKeyboard)}},{key:"speed",set:function(t){this._speed=t},get:function(){return this._speed}},{key:"score",get:function(){return this._snake&&this._snake.length?this._snake.length-this._options.origin.length+1:0}}]),t}();wt.EndReasons={1001:"红烧蛇肉",1002:"撞墙啦",1003:"撞边界啦"};i("f24f");var bt=n["a"].extend({data:function(){return{message:"",title:"",cb:null,visible:!1}},render:function(){var t=arguments[0],e=this.cb,i=e?{click:e}:{};return t("transition",{attrs:{name:"fade"},on:{"after-leave":this.doDestroy}},[t("div",{class:"message__wrapper",directives:[{name:"show",value:this.visible}]},[t("div",{class:"message__mask"}),t("div",{class:"message"},[t("header",{class:"message__header"},[this.title]),t("div",{class:"message__content"},[this.message]),t("footer",{class:"message__footer"},[t("button",{attrs:{type:"button"},on:Object(y["a"])({},i)},["确定"])])])])])},methods:{doDestroy:function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)}}}),kt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,i=new bt({data:function(){return Object(y["a"])({},t,{cb:function(){t.cb&&t.cb(),i.visible=!1}})}});i.$mount(),e.appendChild(i.$el),i.visible=!0},xt=(i("df54"),{name:"Snake",render:function(){var t=this,e=arguments[0];return e("main",{class:"snake"},[e("section",[e("div",{class:"snake__container",ref:"container"},[e("transition",{attrs:{name:"fade"}},[e("div",{class:"snake__mode-wrapper",directives:[{name:"show",value:this.modeVisible}]},[e("div",{class:"snake__mode"},[this.modes.map(function(i){return e("button",{attrs:{type:"button"},on:{click:function(){return t.start(i.name)}}},[i.label])})])])])])]),e("section",{directives:[{name:"show",value:this.showInfo}],class:"snake__info"},[e("div",{class:"form-group"},[e("span",["分数:"]),e("span",[this.score])]),e("div",{class:"form-group"},[e("span",["速度:"]),e("span",[this.speed])])])])},props:{window:{required:!0,type:Object}},data:function(){return{modes:[{name:"common",label:"普通模式"},{name:"level",label:"过关模式"},{name:"dodge",label:"躲避模式"}],mode:null,modeVisible:!0,score:null,speed:null}},computed:{showInfo:function(){return![this.speed,this.score].some(function(t){return!t&&0!==t})}},methods:{showModes:function(){this.modeVisible=!0},message:function(t,e){return kt({title:"消息提醒",message:t,cb:e},this.$refs.container)},start:function(t){this.modeVisible&&(this.modeVisible=!1,this.mode=t,this.updateMode())},updateMode:function(t,e){switch(this.score=t||0,this.mode){case"common":this.updateCommonMode(t,e);break;case"level":this.updateLevelMode(t,e);break;case"dodge":this.updateDodgeMode(t,e);break;default:break}},updateCommonMode:function(t,e){var i=this.$_snake;if(t){var n=1+2*Math.floor(t/3);this.speed=n}else i.prepareStart(),this.speed=1},updateLevelMode:function(){for(var t=[],e=0,i=0;i<5;i++)t.push({score:5*(i+1),speed:1+5*i});return function(i,n){var o=this,a=t[e],r=this.$_snake,s=function(){r.prepareStart(),o.speed=t[0].speed};i?i>=a.score&&(r.disable(),e>=t.length-1?this.message("厉害啊大兄弟，通关啦！",function(){o.showModes(),e=0}):this.message("下一关啦！",function(){var i=t[e+1];r.prepareStart(),o.speed=i.speed,e++})):s()}}(),updateDodgeMode:function(){for(var t=0,e=[],i=0;i<5;i++)e.push({score:5*(i+1),speed:1+5*i,walls:10*(i+1)});return function(i){var n=this,o=this.$_snake,a=function(){o.prepareStart(),n.speed=e[0].speed,o.fillWall(e[0].walls),o.draw()};if(i){var r=e[t];i>=r.score&&(o.disable(),t>=e.length-1?this.message("牛逼啊大兄弟，通关啦！",function(){n.showModes(),t=0}):this.message("下一关啦！",function(){var i=e[t+1];o.prepareStart(),n.speed=i.speed,o.fillWall(i.walls),o.draw(),t++}))}else a()}}(),sendEndMessage:function(t){var e=this,i=t.message;this.message(i,function(){e.showModes()})}},mounted:function(){var t=this.window,e=t.width>767?600:Math.min(t.width,t.height);this.$_snake=new wt(this.$refs.container,{scoreCallback:this.updateMode,endCallback:this.sendEndMessage,width:e,height:e})},beforeDestroy:function(){this.$_snake.destroy()},watch:{speed:function(t){var e=this.$_snake;e&&e.speed!==t&&(e.speed=t)}}});n["a"].use(b["a"]);var Ct=function(t){return t.charAt(0).toLowerCase()+t.slice(1).replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},Mt=[{name:"Clock",component:L},{name:"ColorPicker",component:K},{name:"Cropper",component:dt},{name:"InfiniteScroll",component:vt},{name:"Snake",component:xt}],Ot=new b["a"]({mode:"hash",base:"/ife/",routes:[{path:"/",redirect:{name:"Clock"}}].concat(Object(w["a"])(Mt.map(function(t){return Object(y["a"])({path:"/"+Ct(t.name)},t)})),[{path:"*",name:"NotFound",component:mt}])}),St=Ot;n["a"].config.productionTip=!1,new n["a"]({el:"#app",router:St,render:function(t){return t(_)}}),console.info("version %c".concat("2.6.0"),"color:#108ee9")},ce93:function(t,e,i){},d2d2:function(t,e,i){},df54:function(t,e,i){},f24f:function(t,e,i){}});
//# sourceMappingURL=app.1d37f090.js.map